(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sign-sign"],{"0298":function(e,t,a){"use strict";a.r(t);var n=a("2430"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},"19f3":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var n={navBar:a("b560").default,verifyCodeInput:a("6594").default,agModal:a("321a").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("nav-bar",{attrs:{title:"签约"}}),a("v-uni-view",{staticClass:"ring-helper page-space flex-box align-center"},[a("v-uni-text",{staticClass:"fs-28 color-gray"},[e._v("信息加密处理，仅用于手机验证")])],1),a("v-uni-view",{staticClass:"page-space"},[a("v-uni-view",{staticClass:"fs-38",staticStyle:{margin:"0 0 44upx"}},[e._v(e._s(e.formatMobile))])],1),a("v-uni-view",{staticClass:"form-control mb-20",staticStyle:{background:"#fff"}},[a("verify-code-input",{attrs:{verifyType:3,bankCode:e.bindCardData.bankCode,bankName:e.bindCardData.bankName,cardNo:e.bindCardData.cardNum,mobile:e.bindCardData.mobile,externalClasses:"no-border"},on:{send:function(t){arguments[0]=t=e.$handleEvent(t),e.onGetVerifyCode.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.onInputBlur.apply(void 0,arguments)},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.onInputFocus.apply(void 0,arguments)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.onInputVerifyCode.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"ring-helper page-space flex-box align-center"},[a("v-uni-text",{staticClass:"fs-28 color-gray"},[e._v("签约验证码将发送至您的银行卡预留手机号中，请收到后进行签约")])],1),a("v-uni-view",{staticClass:"submit-btn-wrap page-space"},[a("v-uni-button",{staticClass:"button block-button button-can mb-20",attrs:{loading:e.loading,disabled:!e.enableSubmit},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onSubmit.apply(void 0,arguments)}}},[e._v("确认")])],1),a("ag-modal",{attrs:{isDelay:!0,type:"0006",params:e.agParams,name:"账户委托扣款授权书",visible:e.isShowAgreementModal},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.onToggleAgreement.apply(void 0,arguments)},agree:function(t){arguments[0]=t=e.$handleEvent(t),e.onClickAgreeButton.apply(void 0,arguments)}}})],1)},r=[]},"224d":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".md-wrapper[data-v-0f0d3716]{display:none}.md-wrapper.shown[data-v-0f0d3716]{display:inline;position:static;z-index:1000}.ag-modal-class[data-v-0f0d3716]{\n        /* height: auto !important; */bottom:%?100?%}.c-modal[data-v-0f0d3716]{\n        /* top: calc(100rpx + 44px + var(--status-bar-height)); */top:%?240?%;bottom:%?100?%;left:%?35?%;right:%?35?%;z-index:1200;position:fixed;\n        /* height: 1268rpx; */border-radius:8px;background-color:#fff}.animated[data-v-0f0d3716]{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes bounceIn-data-v-0f0d3716{from,\n      40%,\n      80%,\n      to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}40%{-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}80%{-webkit-transform:scale3d(.97,.97,.97);transform:scale3d(.97,.97,.97)}to{opacity:1;-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes bounceIn-data-v-0f0d3716{from,\n      40%,\n      80%,\n      to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}40%{-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}80%{-webkit-transform:scale3d(.97,.97,.97);transform:scale3d(.97,.97,.97)}to{opacity:1;-webkit-transform:scaleX(1);transform:scaleX(1)}}.bounceIn[data-v-0f0d3716]{-webkit-animation-duration:.75s;animation-duration:.75s;-webkit-animation-name:bounceIn-data-v-0f0d3716;animation-name:bounceIn-data-v-0f0d3716}",""]),e.exports=t},2430:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{isShowLayer:!1}},props:{visible:{type:Boolean,default:!1},externalClasses:{type:String,default:""}},watch:{visible:function(e){var t=this;setTimeout((function(){t.isShowLayer=e}),10)}}};t.default=n},2433:function(e,t,a){"use strict";a.r(t);var n=a("e36e"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},"321a":function(e,t,a){"use strict";a.r(t);var n=a("f068"),i=a("2433");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);var o,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"17ec0ee8",null,!1,n["a"],o);t["default"]=c.exports},"509a":function(e,t,a){"use strict";var n=a("64f0"),i=a.n(n);i.a},"64f0":function(e,t,a){var n=a("224d");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("3961cbd7",n,!0,{sourceMap:!1,shadowMode:!1})},"7a45":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".submit-btn-wrap[data-v-adca1ab8]{margin-top:%?140?%}",""]),e.exports=t},bc18:function(e,t,a){"use strict";a.r(t);var n=a("c911"),i=a("0298");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("509a");var o,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"0f0d3716",null,!1,n["a"],o);t["default"]=c.exports},c911:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"md-wrapper",class:e.visible?"shown":""},[a("v-uni-view",{staticClass:"c-modal animated",class:[e.isShowLayer?"bounceIn":"",e.externalClasses]},[e._t("default")],2),a("v-uni-view",{staticClass:"page-mask",class:e.isShowLayer?"shown":""})],1)},r=[]},ce29:function(e,t,a){"use strict";var n=a("f907"),i=a.n(n);i.a},cea8:function(e,t,a){"use strict";a.r(t);var n=a("e388"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},da7c:function(e,t,a){"use strict";a.r(t);var n=a("19f3"),i=a("cea8");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("ce29");var o,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"adca1ab8",null,!1,n["a"],o);t["default"]=c.exports},e36e:function(e,t,a){"use strict";var n=a("4ea4");a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("5530"));a("96cf");var r=n(a("1da1")),o=(a("26cb"),a("2771")),s=n(a("eed6")),c=a("8e55"),u={data:function(){return{PICTURE_URL:c.PICTURE_URL,agreeTypes:["1","2","3","4","5","6","7","8","9"],agContent:"",isClickAgree:!1,agreeTimer:null}},props:{type:{type:String,default:"0001"},params:{type:Object},adid:{type:String,default:"SDCSXXXXXXXXXXXXXXX"},name:{type:String,default:""},visible:{type:Boolean,default:!1},isShowAgree:{type:Boolean,default:!0},delay:{type:Number,default:10},isDelay:{type:Boolean,default:!1},isAlwaysAgree:{type:Boolean,default:!1}},watch:{visible:function(e){e&&this.getAgContent()}},computed:{userInfo:function(){var e=uni.getStorageSync("userInfo");return e}},methods:{getAgContent:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,n,r,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.type,n=e.params,r=e.userInfo,c=(0,i.default)({type:a,mobileNo:r.mobile||""},n||{}),u=0,t.prev=3,t.next=6,s.default.post(o.agreementApi,{data:(0,i.default)({},c)});case 6:l=t.sent,l&&l.data&&(u=l.data.file||0),e.agContent=u,u&&e.checkAgreeTimer(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),e.agContent=0;case 15:case"end":return t.stop()}}),t,null,[[3,12]])})))()},checkAgreeTimer:function(){var e=this.delay,t=this.isDelay,a=(this.isShowAgree,this.isClickAgree);t&&!a&&(this.agreeTimer=e,this.startAgreeTimer())},close:function(){var e=this.type;this.clearTimer(),this.agreeTimer=this.delay,this.$emit("close",{type:e})},clearTimer:function(){clearTimeout(this.saTimer),this.saTimer=null},startAgreeTimer:function(){var e=this,t=this.agreeTimer,a=this.isClickAgree;a||(t>0?this.saTimer=setTimeout((function(){e.agreeTimer=t-1,e.startAgreeTimer()}),1e3):this.clearTimer())},onClickAgree:function(){this.isClickAgree=!0;var e=this.type;this.$emit("agree",{type:e})},onClickNormalAgree:function(){this.isAlwaysAgree?this.onClickAgree():this.close()}}};t.default=u},e388:function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i,r=n(a("1da1")),o=n(a("5530")),s=a("26cb"),c=n(a("0a34")),u=(0,s.createNamespacedHelpers)("card"),l=u.mapState,d=(u.mapGetters,u.mapActions),f=u.mapMutations,v=(0,s.createNamespacedHelpers)("user"),m={data:function(){return{mobile:"",verifyCode:"",isGetCode:!1,agreeChecked:!1,loading:!1,agParams:{},isShowAgreementModal:!1,verifyCodeFocus:!1,isClickAgree:!1}},computed:(0,o.default)((0,o.default)((0,o.default)({},l(["bindCardData"])),v.mapState(["userIdData"])),{},{homeData:function(){return this.$store.getters.homeData()},enableSubmit:function(){return!(this.loading||!this.isGetCode||6!==this.verifyCode.length)},pageTrackData:function(){return{page_id:"is_sign"}},formatMobile:function(){return c.default.formatMobile(this.bindCardData.mobile)}}),onLoad:function(e){i=e.type||"bind"},methods:(0,o.default)((0,o.default)((0,o.default)({},d(["doBindCard"])),f(["clearBindCardData"])),{},{onInputBlur:function(e){this.$handleTrackBlur("enroll_smsv_code_intime")},onInputFocus:function(e){this.$handleTrackFocus("enroll_smsv_code_intime")},getTrackData:function(){return(0,o.default)({resource_type:"user",event_code:"sbt_sign",resource_uri:"form_sign"},this.pageTrackData)},onSubmit:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,n,r,o,s,u,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.homeData,n=a.name,r=a.certNo,e.loading=!0,o=e.getTrackData(),"fail",t.next=6,e.doBindCard({name:n,certNo:r,pageType:i,isPost:!0,verifyCode:e.verifyCode});case 6:s=t.sent,s&&(s.isError?(c.default.toast(s.message),e.$track.dataPost(o)):s.data&&"1000"===s.code&&(e.$track.setData({resource_value:"sbt"}),"success",u=e.homeData,l="bind"!==i,d=l?"更换银行卡成功":"您的银行卡已绑定成功",e.$track.dataPost(o),e.$track.clearData(),c.default.alert({content:d,onSuccess:function(){"0"===u.passFlag?c.default.navigateTo("setTradeWord",{subcontract:!0,from:"sign"},!0):l?c.default.navigateTo("myCard",{isNavIndex:1,subcontract:!0},!0):uni.navigateBack({delta:2})}}),e.clearBindCardData())),e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},onToggleChecked:function(e){if(this.isClickAgree)this.agreeChecked=!this.agreeChecked;else{var t=this.bindCardData,a={bankInfo:{bankName:t.bankName,acctNo:t.cardNum,phone:t.mobile}};this.agParams=a,this.agreeChecked=!0,this.isShowAgreementModal=!0}},onClickAgreeButton:function(e){this.agreeChecked=!0,this.isClickAgree=!0,this.onToggleAgreement(e)},onToggleAgreement:function(e){var t=this.bindCardData,a={bankInfo:{bankName:t.bankName,acctNo:t.cardNum,phone:t.mobile}};this.agParams=a,this.agreeChecked=this.isClickAgree,this.isShowAgreementModal=!this.isShowAgreementModal},onInputVerifyCode:function(e){this.verifyCode=e.value,this.$handleTrackChange({detail:{value:e.value}},"enroll_smsv_code_incode")},onGetVerifyCode:function(){this.isGetCode=!0,this.$track.setData({enroll_smsv_code_count:1})}})};t.default=m},f068:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var n={cModal:a("bc18").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("c-modal",{attrs:{visible:e.visible,externalClasses:"ag-modal-class"}},[a("v-uni-view",{staticClass:"agree-container"},[a("v-uni-view",{staticClass:"close-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:e.PICTURE_URL+"close.png"}})],1),a("v-uni-view",{staticClass:"ag-content",class:e.isShowAgree?"show-agree":""},[e.agContent?a("v-uni-rich-text",{staticClass:"ag-content-node",attrs:{nodes:e.agContent}}):0===e.agContent?a("v-uni-view",[a("v-uni-view",{staticClass:"fs-26"},[e._v("暂无协议内容")])],1):a("v-uni-view",{staticClass:"loading-wrap"},[a("v-uni-view",{staticClass:"loading-box"},[a("v-uni-view",{staticClass:"loading icon-timer"})],1)],1)],1),e.agContent?[e.isDelay?[a("v-uni-view",{staticClass:"ag-footer flex-box justify-center align-center"},[e.isClickAgree||0===e.agreeTimer?a("v-uni-button",{staticClass:"button buttonNew",attrs:{"hover-class":"button-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClickAgree.apply(void 0,arguments)}}},[e._v("我同意")]):a("v-uni-button",{staticClass:"button disabled buttonNew"},[e._v("我同意 "+e._s(e.agreeTimer)+"S")])],1)]:a("v-uni-view",{staticClass:"ag-footer flex-box justify-center align-center"},[a("v-uni-button",{staticClass:"button buttonNew",attrs:{"hover-class":"button-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClickNormalAgree.apply(void 0,arguments)}}},[e._v("我同意")])],1)]:e._e()],2)],1)},r=[]},f907:function(e,t,a){var n=a("7a45");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("cec5e74e",n,!0,{sourceMap:!1,shadowMode:!1})}}]);