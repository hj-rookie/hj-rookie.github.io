(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-agreement-agreement"],{3271:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var n={navBar:a("b560").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"agreement-page container white-bg safe-padding-bottom"},[a("nav-bar",{attrs:{customLeftEvent:!0,title:"阅读协议"},on:{clickLeft:function(e){arguments[0]=e=t.$handleEvent(e),t.listBack.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"tab-container fixedtop"},[a("v-uni-scroll-view",{staticStyle:{"white-space":"nowrap"},attrs:{"scroll-x":"true","scroll-into-view":t.intoindex}},t._l(t.tabs,(function(e,n){return a("v-uni-view",{key:n,staticClass:"tab-item fs-28 mr-10",attrs:{id:"text"+n},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onTabClick(e,n)}}},[a("v-uni-view",[t._v(t._s(e.title))]),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.activeTab==n,expression:"activeTab==index"}],staticClass:"tab-item-selected"})],1)})),1)],1),a("v-uni-view",{staticClass:"content-wrapper show-detail"},["0030"!==t.currentTab.code?a("v-uni-view",[a("v-uni-rich-text",{staticClass:"show-detail-cn",attrs:{nodes:t.htmlDom}})],1):a("v-uni-scroll-view",{attrs:{"scroll-x":"true"}},[a("v-uni-rich-text",{staticClass:"show-detail-cn",attrs:{nodes:t.htmlDom}})],1)],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.requestAgreementError,expression:"!requestAgreementError"}],staticClass:"bottom-container flex-box flex-column align-center justify-center"},[t.readedAll?t._e():a("v-uni-text",{staticClass:"fs-28 btn-tip"},[t._v("滑动到页面底部完成阅读")]),t.timer?a("v-uni-text",{staticClass:"fs-32 btn"},[t._v(t._s("请阅读完再同意签署 ("+t.time+"s)"))]):t.timer||t.readedAll?a("v-uni-text",{staticClass:"fs-32 btn btn-clickable",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goAuth.apply(void 0,arguments)}}},[t._v("本人已阅读理解并同意协议内容")]):a("v-uni-text",{staticClass:"fs-32 btn"},[t._v("请阅读完再同意签署")]),a("v-uni-view",{staticClass:"bottom-safe-space"})],1)],1)},r=[]},"462f":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.container[data-v-0ab70202]{height:calc(100vh + %?20?%)}.container .fixedtop[data-v-0ab70202]{position:fixed;left:%?32?%;right:%?32?%;z-index:1}.container .tab-container[data-v-0ab70202]{background:#fff;width:100%;padding-right:%?40?%}.container .tab-container .tab-item[data-v-0ab70202]{height:%?100?%;display:inline-block;line-height:%?100?%;vertical-align:middle;color:#999;position:relative}.container .tab-container .tab-item-selected[data-v-0ab70202]{color:#333;position:absolute;bottom:0;left:25%;width:50%;right:0;border-bottom:%?6?% solid #4984f0}.container .content-wrapper[data-v-0ab70202]{padding-left:%?32?%;padding-right:%?32?%;margin-bottom:%?356?%}.container .bottom-container[data-v-0ab70202]{position:fixed;bottom:0;left:0;right:0;background:#fff;padding:%?30?% %?46?% %?76?% %?46?%}.container .bottom-container .btn-tip[data-v-0ab70202]{font-family:SourceHanSansCN-Regular;color:#999;letter-spacing:0;text-align:center;font-weight:400}.container .bottom-container .btn[data-v-0ab70202]{margin-top:%?24?%;width:100%;height:%?92?%;background-image:linear-gradient(90deg,#fb6e4d,#f83b2b);background:#e9908b;border-radius:%?10?%;text-align:center;line-height:%?92?%;vertical-align:middle;color:#fff}.container .bottom-container .btn-clickable[data-v-0ab70202]{background:#ee1710}.show-detail[data-v-0ab70202]{padding-top:%?100?%;height:100%}.show-detail .show-detail-cn[data-v-0ab70202]{border:%?1?% solid transparent;padding-bottom:%?230?%}',""]),t.exports=e},"51e1":function(t,e,a){var n=a("462f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("2a520460",n,!0,{sourceMap:!1,shadowMode:!1})},"9f85":function(t,e,a){"use strict";var n=a("51e1"),i=a.n(n);i.a},aa18:function(t,e,a){"use strict";a.r(e);var n=a("ccc3"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},c8b0:function(t,e,a){"use strict";a.r(e);var n=a("3271"),i=a("aa18");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("9f85");var o,c=a("f0c5"),s=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"0ab70202",null,!1,n["a"],o);e["default"]=s.exports},ccc3:function(t,e,a){"use strict";(function(t){var n=a("4ea4");a("d81d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=n(a("1da1")),r=n(a("ade3")),o=n(a("5530")),c=a("26cb"),s=n(a("8e55")),l=n(a("0a34")),d=a("b589"),u=(0,c.createNamespacedHelpers)("agreement"),f=(0,c.createNamespacedHelpers)("home"),m={data:function(){return{saveHtmlDom:{},htmlDom:"",pageType:"",timer:null,time:0,activeTab:0,currentTab:{},tabs:[],params:"",btnStep:{timeRunning:"timeRunning",timeEnd:"timeEnd",endEnable:"endEnable",end:"end"},readedAll:!1,requestAgreementError:!1,intoindex:""}},onPageScroll:function(t){},onLoad:function(e){t.log("ssaaaaaaaa1111",e);var a=this;a.pageType=e[d.agreementQuery.pageType]||"",a.params=e[d.agreementQuery.params],a.tabs=a.rebuiltTabs({pageType:a.pageType}),a.currentTab=a.tabs[0],a.readedAll=!!this.isReadArgeen[a.pageType]&&this.isReadArgeen[a.pageType],a.readedAll||a.countDown(),a.getRichInfo(a.currentTab.code)},onReachBottom:function(){var e=this;t.log("见底了"),setTimeout((function(){var t=e;t.updateTabOnBottom(t.currentTab),t.readNext()}),700)},methods:(0,o.default)((0,o.default)((0,o.default)({},u.mapMutations(["updateIsReadArgeen"])),u.mapActions(["agreementApi"])),{},{listBack:function(){uni.navigateBack()},goAuth:function(){var t=this;t.updateIsReadArgeen((0,r.default)({},this.pageType,t.readedAll)),uni.navigateBack()},updateTabOnBottom:function(t){var e=this;t.bottom=!0,t.read=!0,e.setReadTimeOfTrack(t.code,!1)},toTop:function(){uni.pageScrollTo({duration:0,scrollTop:0})},getRichInfo:function(e){var a=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var i,r,c,s,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=a,"",i.htmlDom="",i.saveHtmlDom[e]){n.next=16;break}return uni.showLoading({title:"请稍候",mask:!0}),r=a.params,c=a.userInfo,s=r?JSON.parse(r):{},l=(0,o.default)({type:e,mobileNo:c.mobile||""},s),t.log("协议请求数据：",l),n.next=11,i.agreementApi(l);case 11:d=n.sent,setTimeout((function(){uni.hideLoading()}),450),d&&"1000"===d.code?(i.saveHtmlDom[e]=d.data.file,i.htmlDom=d.data.file):(i.requestAgreementError=!0,i.clearTimer()),n.next=17;break;case 16:i.htmlDom=i.saveHtmlDom[e];case 17:i.setReadTimeOfTrack(e,!0);case 18:case"end":return n.stop()}}),n)})))()},setReadTimeOfTrack:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"0007"===t?e?(this.$track.setData({confirm_perloan_contract_open:1}),this.$handleTrackFocus("perloan_contract_readtime")):this.$handleTrackBlur("perloan_contract_readtime"):"0002"===t?e?(this.$track.setData({confirm_quotacontract_open:1}),this.$handleTrackFocus("quotacontract_readtime")):this.$handleTrackBlur("quotacontract_readtime"):"0003"===t&&(e?(this.$track.setData({confirm_personal_information_open:1}),this.$handleTrackFocus("personal_information_readtime")):this.$handleTrackBlur("personal_information_readtime")),this.$track.setCacheData("agreement")},rebuiltTabs:function(t){var e,a=[],n=t.pageType;return e=n===d.PAGE_TYPE.loan&&"channel03"===s.default.CHANNEL?d.AGREEMENT_CODE_BY_TYPE[n][s.default.CHANNEL]||[]:n===d.PAGE_TYPE.bindCard&&"chengde"===s.default.BANK_MP?d.AGREEMENT_CODE_BY_TYPE[n][s.default.BANK_MP][this.homeData.secondStatus]||[]:d.AGREEMENT_CODE_BY_TYPE[n][s.default.BANK_MP]||[],a=e.map((function(t,e){var a=n===d.PAGE_TYPE.bindCard&&"0006"===t&&"qishang"===s.default.BANK_MP;return{title:a?"《授权扣款委托书》":d.AGREEMENT_CODE[t],order:e,code:t,read:!1,bottom:!1,id:"id"+e}})),a},readNext:function(){var t=this,e=t.currentTab.order;if(e<t.tabs.length-1){var a=e+1;t.updateActiveTab(a),t.updateCurrentTab(t.activeTab),t.getRichInfo(t.currentTab.code),t.toTop(),t.scrollToView(a)}else t.readedAll=!0},scrollToView:function(t){var e=this;this.$nextTick((function(){e.intoindex="text"+t})),this.intoindex=""},updateActiveTab:function(t){var e=this;e.activeTab=t},updateCurrentTab:function(t){var e=this;e.currentTab=e.tabs[t]},onTabClick:function(t,e){var a=this;a.readedAll||t.read?(a.scrollToView(e),a.updateActiveTab(e),a.updateCurrentTab(a.activeTab),a.getRichInfo(a.currentTab.code),a.toTop()):l.default.toast("请先阅读".concat(a.currentTab.title))},countDown:function(){var e=this,a=e.configData.readTime||10;t.log("倒计时",a),e.time=a,e.time<=0?e.clearTimer():e.timer=setInterval((function(){t.log("倒计时s",e.time),e.time--,e.time<=0&&e.clearTimer()}),1e3)},clearTimer:function(){var t=this;clearInterval(t.timer),t.timer=null}}),onUnload:function(){this.clearTimer()},computed:(0,o.default)((0,o.default)({userInfo:function(){var t=uni.getStorageSync("userInfo");return t}},u.mapState(["isReadArgeen"])),f.mapState(["configData","homeData"]))};e.default=m}).call(this,a("5a52")["default"])}}]);