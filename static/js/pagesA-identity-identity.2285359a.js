(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-identity-identity"],{1097:function(t,a,e){"use strict";var n=e("4ea4");e("99af"),e("fb6a"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("96cf");var i=n(e("1da1")),u=n(e("ade3")),o=n(e("5530")),r=e("26cb"),s=n(e("0a34")),c=(n(e("7d4c")),e("8e55")),l=(0,r.createNamespacedHelpers)("factor"),d=l.mapState,p=(l.mapGetters,l.mapActions),f=l.mapMutations,v=(0,r.createNamespacedHelpers)("card"),m=(0,r.createNamespacedHelpers)("result"),g=(0,r.createNamespacedHelpers)("signIn"),b=(0,r.createNamespacedHelpers)("loan"),h={loan:"loan",login:"login"},y={data:function(){return{maskIdnum:!1,type:h.loan,loading:!1,isSetPw:!0,PICTURE_URL:c.PICTURE_URL}},computed:(0,o.default)((0,o.default)((0,o.default)((0,o.default)({},d(["identData"])),v.mapGetters(["defaultGetCard"])),g.mapState(["data"])),{},{submitEnabled:function(){return!(!this.loading&&this.identData.name&&this.identData.name.length>0&&this.identData.certNo&&this.identData.certNo.length>0)},maskNum:function(){var t=this.identData.certNo;return t},pageTrackData:function(){return{page_id:this.$trackParams.pageInfo.login.pageId,page_name:this.$trackParams.pageInfo.login.name,event_code:this.$trackParams.eventCode.sbtLogin,resource_type:this.$trackParams.resourceType.submit,resource_value:this.$trackParams.resourceValue.sbtLogin,eventType:this.$trackParams.eventType.login,login_pwd_incode:"",login_pwd_intime:"",login_method:"1"}}}),onLoad:function(t){this.type=t.type||h.loan,this.isSetPw=t.isSetPw},onUnload:function(){this.clearIdentData()},methods:(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)({},f(["updateIdentData","clearIdentData"])),b.mapActions(["loanApply"])),m.mapMutations(["update"])),g.mapActions(["doSignIn"])),p(["noticeAuthCheck"])),g.mapMutations(["updateSignInData"])),{},{getTrackData:function(){var t=this.$track.getVrifyData();return(0,o.default)((0,o.default)({},t),this.pageTrackData)},blur:function(t){var a=t.currentTarget.dataset.type;if("certNo"===a){var e=/[0-9]{17}(x|X|[0-9]){1}$/;1!=e.test(this.identData.certNo)?(s.default.toast("输入正确身份证号码"),this.maskIdnum=!1):this.maskIdnum=!0}},focus:function(t){var a=t.currentTarget.dataset.type;"certNo"===a&&(this.maskIdnum=!1)},onChange:function(t){var a=t.currentTarget.dataset.type,e=t.detail.value;this.updateIdentData((0,u.default)({},a,e))},postData:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var e,n,i,o,r,c,l,d,p,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e=/^(?!\•)(?!.*\•$)(?!.*?\•\•)(?!\·)(?!.*\·$)(?!.*?\·\·)[\u4E00-\u9FA5•·]+$/,t.identData.name&&1==e.test(t.identData.name)&&!(t.identData.name.length<2)){a.next=4;break}return s.default.toast("输入正确的名字"),a.abrupt("return");case 4:if(n=/[0-9]{17}(x|X|[0-9]){1}$/,1==n.test(t.identData.certNo)){a.next=8;break}return s.default.toast("输入正确身份证号码"),a.abrupt("return");case 8:return uni.showLoading({title:"请稍候..."}),t.loading=!0,a.next=12,t.noticeAuthCheck(t.type===h.login?t.data.userId:null);case 12:if(i=a.sent,uni.hideLoading(),!i||"1000"!==i.code){a.next=46;break}if(t.type!==h.loan){a.next=37;break}return o=uni.getStorageSync("loanData"),o.pwdCode=i.data.pwdCode,uni.showLoading({title:"请稍候..."}),a.next=21,t.loanApply(o);case 21:if(r=a.sent,uni.hideLoading(),!r||"1000"!==r.code){a.next=33;break}return t.$track.dataPost({resource_type:"submit",resource_value:"sbt_loan",event_result:"success"}),c.amount,c=uni.getStorageSync("loanData"),l={loanState:"0"},d=t.defaultGetCard.cardNo.slice(-4),s.default.navigateTo("loanResult",{subcontract:"B",loanTime:r.data.applyTime||"",loanAmount:"".concat(c.amount,"元"),loanAccount:"".concat(t.defaultGetCard.bankName," 尾号(").concat(d,")"),params:JSON.stringify(l)},!0),a.abrupt("return");case 33:t.$track.dataPost({resource_type:"submit",resource_value:"sbt_loan",event_result:"fail"}),s.default.navigateTo("failLoanResult",{subcontract:"B"},!0);case 35:a.next=44;break;case 37:if(t.type!==h.login){a.next=44;break}return t.updateSignInData({pwdCode:i.data.pwdCode}),a.next=41,t.doSignIn();case 41:p=a.sent,f=t.$trackParams.login.oneclick_login_otherphone_sucess,p&&"1000"===p.code&&!i.data.authType?(t.$track.setData((0,u.default)({},f.name,f.success)),t.$track.updateGlobalData({mobile:t.data.mobile,userId:t.data.userId?t.data.userId:"",uuid:t.data.userId?t.data.userId:""}),s.default.toast("登录成功","none",!0),setTimeout((function(){uni.switchTab({url:"../../pages/index/index"})}),1500)):t.$track.setData((0,u.default)({},f.name,f.fail));case 44:a.next=48;break;case 46:t.type===h.login?i&&"3030"===i.code&&s.default.alert({content:"身份信息错误，登录失败",confirmText:"退出",onSuccess:function(){uni.switchTab({url:"../../pages/index/index"})}}):s.default.navigateTo("failLoanResult",{subcontract:"B"},!0),t.loading=!1;case 48:case"end":return a.stop()}}),a)})))()}})};a.default=y},"1b74":function(t,a,e){"use strict";var n=e("8067"),i=e.n(n);i.a},5158:function(t,a,e){"use strict";var n;e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return u})),e.d(a,"a",(function(){return n}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"oneView flex-box  justify-center flex-column",staticStyle:{padding:"40upx"}},[e("v-uni-view",{staticClass:"a"},[t._v("身份信息认证")]),e("v-uni-view",{staticClass:"b"},[t._v("信息仅用于身份验证、借还款服务")])],1),e("v-uni-view",{staticClass:"form-control lr"},[e("v-uni-view",{staticClass:"form-item"},[e("v-uni-view",{staticClass:"label"},[t._v("姓名")]),e("v-uni-view",{staticClass:"valueT"},[e("v-uni-input",{attrs:{type:"text",maxlength:"20","data-type":"name",placeholder:"请输入您的姓名",value:t.identData.name},on:{blur:function(a){arguments[0]=a=t.$handleEvent(a),t.blur.apply(void 0,arguments)},focus:function(a){arguments[0]=a=t.$handleEvent(a),t.focus.apply(void 0,arguments)},input:function(a){arguments[0]=a=t.$handleEvent(a),t.onChange.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-view",{staticClass:"label"},[t._v("身份证")]),e("v-uni-view",{staticClass:"valueT"},[e("v-uni-input",{attrs:{type:"idcard","data-type":"certNo",maxlength:"18",placeholder:"请输入您的身份证号码",value:t.maskNum},on:{blur:function(a){arguments[0]=a=t.$handleEvent(a),t.blur.apply(void 0,arguments)},focus:function(a){arguments[0]=a=t.$handleEvent(a),t.focus.apply(void 0,arguments)},input:function(a){arguments[0]=a=t.$handleEvent(a),t.onChange.apply(void 0,arguments)}}})],1)],1)],1),e("v-uni-view",{staticClass:"button-container page-space",staticStyle:{"margin-top":"160upx"}},[e("v-uni-button",{staticClass:"button block-button button-can",attrs:{loading:t.loading,disabled:t.submitEnabled,"hover-class":"button-hover"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.postData.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)},u=[]},8067:function(t,a,e){var n=e("bd69");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("4f06").default;i("25d95b1c",n,!0,{sourceMap:!1,shadowMode:!1})},8369:function(t,a,e){"use strict";e.r(a);var n=e("5158"),i=e("b3f5");for(var u in i)"default"!==u&&function(t){e.d(a,t,(function(){return i[t]}))}(u);e("1b74");var o,r=e("f0c5"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"7645149b",null,!1,n["a"],o);a["default"]=s.exports},b3f5:function(t,a,e){"use strict";e.r(a);var n=e("1097"),i=e.n(n);for(var u in n)"default"!==u&&function(t){e.d(a,t,(function(){return n[t]}))}(u);a["default"]=i.a},bd69:function(t,a,e){var n=e("24fb");a=n(!1),a.push([t.i,".valueT[data-v-7645149b]{text-align:right}.oneView .a[data-v-7645149b]{color:#000;font-size:%?36?%}.oneView .b[data-v-7645149b]{color:#888;font-size:%?28?%;margin-top:%?4?%}",""]),t.exports=a}}]);