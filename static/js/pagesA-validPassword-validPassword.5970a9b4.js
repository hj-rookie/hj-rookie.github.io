(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-validPassword-validPassword"],{"09be":function(e,a,t){var n=t("8d2f");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=t("4f06").default;i("21c8632e",n,!0,{sourceMap:!1,shadowMode:!1})},"330a":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.faceTimeTrack=a.replenish=a.activeDetailPages=a.pageObj=a.repayOverdueDetails=a.repaymentDetails=a.identityAuthentication=a.loadingStatic=a.faceFlags=a.queryValidMobile=a.querySubmitSuccess=a.queryWebview=a.querySignInCheck=void 0;var n={mobileNo:"mobileNo",appCertNo:"appCertNo",appCode:"appCode"};a.querySignInCheck=n;var i={src:"src",title:"title"};a.queryWebview=i;var r={pageType:{types:{email:"email",download:"download"},typeName:"pageType"},emailAddress:"emailAddress"};a.querySubmitSuccess=r;var o={query:{type:"type",fromType:"fromType",mtype:"mtype",clearDataType:"clearDataType"},clearDataType:{reChangeMobile:"reChangeMobile",back:"back"},type:{changeMobile:"changeMobile",resetTradePwd:"resetTradePwd"},fromTypeValue:{transfer:"transfer",forget1:"forget1",forget:"forget",collect:"collect",payForPwd:"payForPwd",cancelPhone:"cancelPhone",changeFail:"changeFail"}};a.queryValidMobile=o;var s={fromType:"fromType",fromTypeValue:{credit:"credit",loan:"loan",bindCard:"bindCard",changeMobile:"changeMobile",resetTradePassword:"resetTradePassword",ocr:"ocr",unbindCard:"unbindCard",login:"login"},pageFlagsName:"pageFlagsName",pageFlags:{credit:"credit",faceUploadLoading:"faceUploadLoading"},errorMsgFlags:{ocr:"ocr",three:"three"}};a.faceFlags=s;var d={pageFlags:"pageFlags",name:{otherSignIn:"otherSignIn",signIn:"signIn"}};a.pageObj=d;var c={face_time_h5:"face_time_h5"};a.faceTimeTrack=c;var l={urlName:"urlName",urlNameValue:{index:"index",my:"my"}};a.identityAuthentication=l;var u={process:"process",finish:"finish",fail:"fail",credit_fail:"credit_fail",location_get_fail:"location_get_fail",network_timeout:"network_timeout",identity_info_fail:"identity_info_fail",creditFailThree:"creditFailThree",creditNotFit:"creditNotFit",creditFail:"creditFail"};a.loadingStatic=u;var p={isOverdue:"isOverdue",repaymentDate:"repaymentDate"};a.repaymentDetails=p;var f={loanId:"loanId",TABINDEX:"TABINDEX",loanAmount:"loanAmount",loanDate:"loanDate"};a.repayOverdueDetails=f;var h={fromFlags:"fromFlags",fromValue:{replenishOldUser:"replenishOldUser",replenishNewUser:"replenishNewUser"}};a.replenish=h;var b={bannerIndex:"bannerIndex"};a.activeDetailPages=b},"4a21":function(e,a,t){"use strict";t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return r})),t.d(a,"a",(function(){return n}));var n={navBar:t("b560").default},i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"container"},[t("nav-bar",{attrs:{title:"原交易密码验证"}}),e.reloading?e._e():["trade"===e.pageType?t("v-uni-view",[t("v-uni-view",{staticClass:"page-top-area"},[t("v-uni-text",{staticClass:"fs-30 color-gray"},[e._v("输入交易密码，完成身份验证")])],1),t("v-uni-view",{staticClass:"form-control lr"},[t("v-uni-view",{staticClass:"form-item"},[t("v-uni-view",{staticClass:"label"},[e._v("交易密码")]),t("v-uni-view",{staticClass:"value text-tr"},[t("v-uni-view",{staticClass:"flex-box align-center justify-end"},[t("v-uni-view",[e.KBSWITCH&&"chengde"===e.bank_mark?t("v-uni-view",{staticClass:"input-item pwd-input flex-box align-center input-class"},[t("safe-board",{ref:"skb1",attrs:{id:"skb1",keyboardType:"number",right:"right",keyboardNumber:"1",placeholder:"输入6位数"},on:{onDone:function(a){arguments[0]=a=e.$handleEvent(a),e.onDone.apply(void 0,arguments)},show:function(a){arguments[0]=a=e.$handleEvent(a),e.show.apply(void 0,arguments)},hide:function(a){arguments[0]=a=e.$handleEvent(a),e.$handleTrackBlur("login_pwd_intime")}}})],1):"taian"===e.bank_mark?t("v-uni-view",{staticClass:"input-item pwd-input flex-box align-center input-class"},[t("taian-safekeyboard",{ref:"taiankeyboardRef",attrs:{sktype:1},on:{close:function(a){arguments[0]=a=e.$handleEvent(a),e.onClose.apply(void 0,arguments)},change:function(a){arguments[0]=a=e.$handleEvent(a),e.onTradePwChange.apply(void 0,arguments)}}}),t("v-uni-input",{attrs:{disabled:!0,password:!0,maxlength:"6",type:"number",value:e.pwd,placeholder:"输入6位数字","placeholder-class":"input-placeholder"},on:{input:function(a){arguments[0]=a=e.$handleEvent(a),e.handleInputChange(a,"trade")},click:function(a){arguments[0]=a=e.$handleEvent(a),e.taianShowKeyboard.apply(void 0,arguments)}}})],1):"beinongshang"===e.bank_mark?t("v-uni-view",{staticClass:"input-item pwd-input flex-box align-center input-class"},[t("v-uni-view",{staticClass:"key-input-box",attrs:{"data-name":"pwd"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.showkeybox("pwd")}}},[t("v-uni-view",{class:["input-title",e.pwdInfo.hasValue||e.pwdInfo.hasCursor?"hideView":""]},[e._v("请输入6位数字")]),t("v-uni-view",{class:["key-input-board",e.pwdInfo.hasValue||e.pwdInfo.hasCursor?"showView":""]},[t("v-uni-view",{staticClass:"input-text"},e._l(e.pwdInfo.inputVal,(function(e,a){return t("v-uni-text",{key:a,staticClass:"text-rec"})})),1),t("v-uni-view",{class:["key-input",e.pwdInfo.hasCursor?"showView":"hideView"],staticStyle:{right:"0"}})],1)],1),t("bns-safekeyboard",{ref:"bnskeyboard",on:{showKeyboard:function(a){arguments[0]=a=e.$handleEvent(a),e.showKeyboard.apply(void 0,arguments)},onInput:function(a){arguments[0]=a=e.$handleEvent(a),e.onInput.apply(void 0,arguments)},show_bnsKeyboard:function(a){arguments[0]=a=e.$handleEvent(a),e.show_bnsKeyboard.apply(void 0,arguments)},getEncryptParam:function(a){arguments[0]=a=e.$handleEvent(a),e.getEncryptParam.apply(void 0,arguments)},confirmNumber:function(a){arguments[0]=a=e.$handleEvent(a),e.confirmNumber.apply(void 0,arguments)}}})],1):t("v-uni-view",[t("v-uni-input",{attrs:{password:!0,maxlength:"6",type:"number",value:e.tradePassword,placeholder:"输入6位数字","placeholder-class":"input-placeholder"},on:{input:function(a){arguments[0]=a=e.$handleEvent(a),e.handleInputChange(a,"trade")}}})],1)],1)],1)],1)],1)],1)],1):e._e(),t("v-uni-view",{staticClass:"button-container page-space mt"},[t("v-uni-button",{staticClass:"button block-button",class:[e.clickable?"":"button-can"],attrs:{loading:e.loading,disabled:e.clickable},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onCheckPassword.apply(void 0,arguments)}}},[e._v("完成")])],1)]],2)},r=[]},"8d2f":function(e,a,t){var n=t("24fb");a=n(!1),a.push([e.i,".key-input-box[data-v-670e03c4]{\r\n\t/* border: 1px solid #ddd; */border-radius:5px;position:relative;height:50px}.input-title[data-v-670e03c4]{padding-left:%?14?%;font-size:14px;color:#b2b2b2;line-height:50px;height:50px}.key-form-line[data-v-670e03c4]{\r\n\t/* margin: 30rpx; */}.key-input-board[data-v-670e03c4]{display:none;position:relative;border-radius:5px;background:#fff;height:50px}.key-input[data-v-670e03c4]{position:absolute;\r\n\t/* left: 10px; */top:15px;width:1px;height:20px;background:#000;animation:inputfocus-data-v-670e03c4 1s infinite;-webkit-animation:inputfocus-data-v-670e03c4 1s infinite}.input-text[data-v-670e03c4]{margin-left:10px;height:50px;line-height:50px}.input-text .text-rec[data-v-670e03c4]{display:inline-block;margin:3px;width:6px;height:6px;border-radius:86px;background:#000}.showView[data-v-670e03c4]{display:block}.hideView[data-v-670e03c4]{display:none}@-webkit-keyframes inputfocus-data-v-670e03c4{0%{opacity:1}30%{opacity:1}70%{opacity:0}100%{opacity:0}}@keyframes inputfocus-data-v-670e03c4{0%{opacity:1}30%{opacity:1}70%{opacity:0}100%{opacity:0}}.mt[data-v-670e03c4]{margin-top:%?280?%}",""]),e.exports=a},"908e":function(e,a,t){"use strict";t.r(a);var n=t("d9ac"),i=t.n(n);for(var r in n)"default"!==r&&function(e){t.d(a,e,(function(){return n[e]}))}(r);a["default"]=i.a},bf9e:function(e,a,t){"use strict";t.r(a);var n=t("4a21"),i=t("908e");for(var r in i)"default"!==r&&function(e){t.d(a,e,(function(){return i[e]}))}(r);t("f7b3");var o,s=t("f0c5"),d=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"670e03c4",null,!1,n["a"],o);a["default"]=d.exports},d9ac:function(e,a,t){"use strict";(function(e){var n=t("4ea4");t("99af"),t("e25e"),t("ac1f"),t("5319"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t("ade3"));t("96cf");var r=n(t("1da1")),o=n(t("5530")),s=t("26cb"),d=n(t("0a34")),c=n(t("8e55")),l=n(t("8be5")),u=n(t("6388")),p=t("330a"),f=(0,s.createNamespacedHelpers)("password"),h=f.mapState,b=(f.mapGetters,f.mapActions),y=f.mapMutations,g=(0,s.createNamespacedHelpers)("target"),v=(0,s.createNamespacedHelpers)("user"),m=(0,s.createNamespacedHelpers)("result"),w=(0,s.createNamespacedHelpers)("card"),k={},T={components:{"taian-safekeyboard":l.default,bnsSafekeyboard:u.default},data:function(){return{pageType:"",fromType:"",cardNo:"",loading:!1,reloading:!0,KBSWITCH:c.default.KBSWITCH,bank_mark:c.default.BANK_KB,base64EncryptedData:"",base64EncryptedRc:"",pwd:"",inputArray:[],pwdInfo:{},isConfirm:!1}},computed:(0,o.default)((0,o.default)((0,o.default)((0,o.default)({},h({tradePassword:function(e){return e.tradePassword.input||""}})),v.mapState(["base64ServerRandom"])),g.mapState(["targetData"])),{},{clickable:function(){if(this.KBSWITCH&&"beinongshang"===this.bank_mark){if(this.isConfirm&&this.pwdInfo.inputVal&&this.pwdInfo.inputVal.length>0)return!1}else if(this.KBSWITCH&&"chengde"===this.bank_mark){if(e.log("cccccccccccccc",this.base64EncryptedData,this.base64EncryptedRc),this.base64EncryptedData&&-3!==this.base64EncryptedData)return!1}else if(this.pwd.length>5)return!1;return!0}}),onLoad:function(a){e.log(1111,a),this.clearPassword(),this.pageType=a.type||"",this.fromType=a.fromType||"changeMobile","unbindCard"===this.fromType&&(this.cardNo=a.cardNo),this.reloading=!1},mounted:function(){"beinongshang"===this.bank_mark&&this.initKeyboard()},onUnload:function(){this.$refs.skb1.hiddenKeyboard()},onHide:function(){this.$refs.skb1.hiddenKeyboard()},methods:(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)({},m.mapMutations({update:"update"})),y(["updatePassword","clearPassword"])),v.mapActions(["getKeyboardNumber"])),b(["verifyLoginPassword","verifyTradePassword"])),g.mapMutations(["clearTargetData"])),w.mapActions(["bankCardUnBind"])),{},{initKeyboard:function(){var e=this.$refs.bnskeyboard;e.randomOffset(),e.setKeyLayout(),e.sendDrawInfo()},showkeybox:function(e){this.isConfirm=!1;var a=this.$refs.bnskeyboard;a.showkeybox(e)},onInput:function(e){this.pwdInfo=e},show_bnsKeyboard:function(e){this.pwdInfo.hasCursor=e},confirmNumber:function(e){this.pwdInfo=e,6!==this.pwdInfo.inputVal.length||this.pwdInfo.isClose?this.$refs.bnskeyboard.defaultInput():(this.$refs.bnskeyboard.submitKeyBox(),this.isConfirm=!0)},getEncryptParam:function(e){e&&(k=e)},show:function(e){this.$handleTrackFocus("login_pwd_intime"),this.cb=e,this.getRandom()},onDone:function(e){this.base64EncryptedData=e.value,this.base64EncryptedRc=e.encryptRandomData},onChange:function(e,a,t){this.logData="\n输入ID".concat(e,"输入类型").concat(a,"输入长度").concat(t,"\n").concat(this.logData)},myevent:function(e){var a=this;return(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.clearPassword(),t.next=3,a.getRandom();case 3:e.detail();case 4:case"end":return t.stop()}}),t)})))()},onPasswordChange:function(e){this.base64EncryptedData=e.detail.value,this.base64EncryptedRc=e.detail.random},taianShowKeyboard:function(){this.$refs.taiankeyboardRef.safekey_open()},clearPassword:function(){this.base64EncryptedData="",this.base64EncryptedRc=""},onClose:function(e){"taian"===this.bank_mark&&(e||this.$refs.taiankeyboardRef.safekey_bindCancle(),this.updatePassword({type:"trade",key:"input",value:""}),this.pwd="")},onTradePwChange:function(e){this.updatePassword({type:"trade",key:"input",value:e.uuid}),this.pwd=e.pwd},getRandom:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.getKeyboardNumber({busType:"login"===e.pageType?"0":"1"});case 3:t=a.sent,t&&e.cb&&e.cb(t.data.pwdCode),a.next=9;break;case 7:a.prev=7,a.t0=a["catch"](0);case 9:return a.prev=9,e.loading=!1,uni.hideLoading(),a.finish(9);case 13:case"end":return a.stop()}}),a,null,[[0,7,9,13]])})))()},showKeybaoard:function(){this.$handleTrackBlur("login_pwd_intime")},basicCheck:function(){var e="";return this.KBSWITCH&&"chengde"===this.bank_mark?this.base64EncryptedData&&-3!==this.base64EncryptedData?this.base64EncryptedData&&-1!==this.base64EncryptedData||(e="请输入6位数密码"):e="请输入交易密码":"taian"===this.bank_mark?""===this.pwd?e="请输入交易密码":this.pwd.length<6&&(e="请输入6位数密码"):"beinongshang"===this.bank_mark&&(0===this.pwdInfo.inputVal.length?e="请输入交易密码":this.pwdInfo.inputVal.length<6&&(e="请输入6位数密码")),e},onCheckPassword:function(){var a=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var n,i,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("trade"!==a.pageType){t.next=12;break}if(!a.basicCheck()){t.next=4;break}return d.default.alert({content:a.basicCheck()}),t.abrupt("return");case 4:return a.loading=!0,n={},n="beinongshang"===a.bank_mark?(0,o.default)({},k):{base64EncryptedData:a.base64EncryptedData,base64EncryptedRc:a.base64EncryptedRc},t.next=9,a.verifyTradePassword((0,o.default)({},n));case 9:i=t.sent,"beinongshang"===a.bank_mark&&a.initKeyboard(),i&&(i.isError||"5007"===i.code?(a.loading=!1,a.missPassword(i),a.KBSWITCH&&"chengde"===a.bank_mark&&(a.selectComponent("#pwdKeyboard").clearInputValue(),a.base64EncryptedData="",a.base64EncryptedRc=""),a.onClose()):"1000"===i.code?(r=a.targetData,r&&r.validTradePassword?(s=r.validTradePassword,"card"===s.to&&"card"===s.from?uni.redirectTo({url:"../account/card?type="+s.args.type}):d.default.navigateTo(s.to,s.args,!0),a.clearTargetData()):"unbindCard"===a.fromType?(e.log("this.cardNo",a.cardNo),a.$track.dataPost({event_code:"click_unfreezing",resource_type:"click",resource_value:"click_unfreezing",event_result:"success"}),setTimeout((function(){var e={cardNo:a.cardNo};a.unbind(e)}),200)):d.default.navigateTo("passwordReset",{type:"tradePwd",fromType:a.fromType,pwdType:"remTradePwd",subcontract:!0},!0)):a.clearCDKeyBoard());case 12:a.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},clearCDKeyBoard:function(){this.KBSWITCH&&"chengde"===this.bank_mark&&(this.$refs.skb1.clear(),this.loading=!1,this.base64EncryptedData="",this.base64EncryptedRc=""),this.onClose()},unbind:function(a){var t=this;return(0,r.default)(regeneratorRuntime.mark((function n(){var r,s,c,l,u,f,h,b,y;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return uni.showLoading({title:"请稍候..."}),r=t.$track.getVrifyData(),s=wx.getStorageSync("userInfo"),c={org_id:"12345",eventType:"13",mobile:s.mobile,uuid:s.uuid?s.uuid:"",id_number:s.idNumber?s.idNumber:"",name:s.name?s.name:""},c.event_code="sbt_binding",c.resource_value="sbt_binding",c.resource_type="click",l=(0,o.default)((0,o.default)({},r),c),u={fraudContent:JSON.stringify(l),cardNo:a.cardNo},n.next=11,t.bankCardUnBind(u);case 11:f=n.sent,e.log("result",f),f&&"1000"===f.code&&"1"===f.data.resultFlag?d.default.navigateBack():f&&"1000"===f.code&&"1"!==f.data.resultFlag?(h=f.unbindData,h.authType=f.data.authType,uni.setStorage({key:"unbindData",data:h}),b=f.data.authType,"2"===b&&(y=t.$store.getters.homeData(),"1"===y.biopsyType||"3"===y.biopsyType?d.default.navigateTo("faceRecordStart",(0,i.default)({subcontract:"A"},p.faceFlags.fromType,p.faceFlags.fromTypeValue.unbindCard),!0):d.default.navigateTo("newCollet",{type:"unbindCard",fromType:"unbindCard",subcontract:!0},!0))):f&&f.data&&"2092"===f.code?(f?f.message:"",d.default.alert({content:f?f.message:"",onSuccess:function(e){e.confirm&&(t.update({type:"loan",title:"解绑卡失败",backPage:"index",redirect:"index",result:"cancel",desc:"解绑卡失败",icon:""}),d.default.navigateTo("result",{isFromRepay:"unbindCard",title:"解绑卡失败"},!0))}})):t.clearCDKeyBoard(),uni.hideLoading();case 15:case"end":return n.stop()}}),n)})))()},missPassword:function(e){var a=this,t=e.message,n=t.replace(/[^0-9]/gi,"");if(0===parseInt(n)){if(t="交易密码已被锁定，请您点击忘记密码，重置交易密码","bindCard"===this.fromType||"unbindCard"===this.fromType){t="交易密码已锁定，请您重置交易密码后重试";var r="bindCard"===this.fromType?"绑卡失败":"解绑卡失败";return void d.default.alert({content:t,onSuccess:function(){a.update({type:"loan",title:r,backPage:"index",redirect:"index",result:"cancel",desc:r,icon:""}),d.default.navigateTo("result",{isFromRepay:"bindCard",title:r,type:"estRefuse"},!0)}})}}else t="交易密码不正确，你还可以输入".concat(n,"次");d.default.alert({content:t,cancelText:"重新输入",confirmTextCancel:"忘记密码",confirmColor:"#DEB772",onSuccess:function(){var e;d.default.navigateTo("validMobile",(e={type:"resetTradePwd"},(0,i.default)(e,p.faceFlags.fromType,p.faceFlags.fromTypeValue.resetTradePassword),(0,i.default)(e,"pageFlags","validPassword"),(0,i.default)(e,"subcontract","A"),e))}})},handleInputChange:function(e,a){this.updatePassword({type:a,key:"input",value:e.detail.value})}})};a.default=T}).call(this,t("5a52")["default"])},f7b3:function(e,a,t){"use strict";var n=t("09be"),i=t.n(n);i.a}}]);