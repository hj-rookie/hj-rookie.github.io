(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-verifySms-verifySms"],{"31d2":function(e,t,n){"use strict";var a=n("f203"),i=n.n(a);i.a},"5b49":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));var a={navBar:n("b560").default,smsPopup:n("fe89").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"container",staticStyle:{"background-color":"white"}},[n("nav-bar",{attrs:{title:"短信验证"}}),n("v-uni-view",{staticClass:"reg-logo-box flex-box  justify-center flex-column",staticStyle:{padding:"40upx","margin-left":"30upx","align-items":"flex-start"}},[n("v-uni-view",{staticStyle:{"font-size":"44upx"}},[e._v("验证码已发送至")]),n("v-uni-view",{staticStyle:{color:"#4C4C4C","font-size":"28upx"}},[e._v(e._s(e._f("mobileMask")(e.mobile)))])],1),n("v-uni-view",{staticClass:"form-control"},[n("v-uni-view",{staticStyle:{color:"#282828","font-size":"28upx","margin-left":"30upx","margin-top":"44upx"}},[e._v("请输入验证码")]),n("v-uni-view",{staticClass:"flex-box flex_row justify-center align-center"},e._l(e.verifyList,(function(t,a){return n("v-uni-view",{key:a,staticStyle:{padding:"10upx"}},[n("v-uni-input",{ref:"input"+a,refInFor:!0,staticStyle:{"border-bottom":"1upx solid #999999",height:"80upx",width:"86upx","text-align":"center","font-size":"18pt"},attrs:{type:"number",focus:e.vList[a],pattern:"[0-9]*",maxlength:"1",id:"input"+a,value:e.verifyList[a]},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.verifyInputChange(t,a)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.verifyBlur(a)}}})],1)})),1),n("v-uni-view",{staticClass:"flex-box flex_row justify-between align-center",staticStyle:{"margin-top":"20upx","margin-left":"30upx"}},[n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.codeLoading,expression:"codeLoading"}],staticClass:"fs-28",staticStyle:{color:"#888888"},attrs:{"hover-class":"view-hover"}},[e._v(e._s(e.codeButtonText))]),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.codeLoading,expression:"!codeLoading"}],staticClass:"fs-28",staticStyle:{color:"#888888"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getVerify.apply(void 0,arguments)}}},[e._v("获取短信验证码")])],1)],1),n("sms-popup",{attrs:{propsZindex:999,phoneNumber:e.mobile,showSmsImagePop:e.smsImage},on:{successSms:function(t){arguments[0]=t=e.$handleEvent(t),e.successSms.apply(void 0,arguments)}}})],1)},s=[]},"61c7":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));var a={uniPopup:n("65a9").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-popup",{ref:"popupSms",attrs:{"mask-click":!1,propsZindex:e.propsZindex}},[n("v-uni-view",{staticClass:"sms-popup-comp"},[n("v-uni-image",{staticClass:"trade-cancle",attrs:{src:e.PICTURE_URL+"close_loan.png"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closePop.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"fs-32 color-black-3",staticStyle:{"text-align":"center","margin-top":"48rpx","margin-bottom":"40rpx"}},[e._v("请输入图形验证码")]),n("v-uni-view",{staticClass:"sms-content"},[n("v-uni-input",{attrs:{type:"text",placeholder:"请输入","placeholder-style":"color:#B2B2B2;"},model:{value:e.smsImageInput,callback:function(t){e.smsImageInput=t},expression:"smsImageInput"}}),e.showImageCode?n("v-uni-image",{attrs:{src:"data:image/png;base64,"+e.showImageCode}}):e._e()],1),n("v-uni-view",{staticClass:"sms-text fs-32",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitSmsImage.apply(void 0,arguments)}}},[e._v("确定")])],1)],1)},s=[]},"6b9e":function(e,t,n){"use strict";n.r(t);var a=n("5b49"),i=n("fbf1");for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);var o,r=n("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);t["default"]=u.exports},"76b6":function(e,t,n){"use strict";var a=n("4ea4");n("a434"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("ade3"));n("96cf");var s=a(n("1da1")),o=a(n("5530")),r=n("4d46"),u=n("26cb"),c=a(n("0a34")),d=a(n("a341")),l=(0,u.createNamespacedHelpers)("verifySms"),f=(l.mapState,l.mapActions),p=(0,u.createNamespacedHelpers)("signIn"),v=(0,u.createNamespacedHelpers)("verify"),m={data:function(){return{loading:!1,verifyCode:"",verifyCodeFocus:!1,isGetverifyCode:!1,codeLoading:!1,codeSecond:90,type:"login",verifyList:["","","","","",""],vList:[!0,!1,!1,!1,!1,!1],isInvoking:!1,isSendVerify:!1,showTempDate:"",hideTempDate:"",smsImage:!1}},computed:(0,o.default)((0,o.default)((0,o.default)({},p.mapState(["signInData","data"])),v.mapState(["sentinelFlag"])),{},{mobile:function(){return this.signInData.mobileNumber},codeButtonText:function(){var e=this.codeSecond;return e<90?e+"s后重新获取":"获取短信验证码"},pageTrackData:function(){return{page_id:this.$trackParams.pageInfo.login.pageId,page_name:this.$trackParams.pageInfo.login.name,event_code:this.$trackParams.eventCode.sbtLogin,resource_type:this.$trackParams.resourceType.submit,resource_value:this.$trackParams.resourceValue.sbtLogin,eventType:this.$trackParams.eventType.login,login_pwd_incode:"",login_pwd_intime:"",login_method:"2"}}}),onLoad:function(e){this.type=e.type,this.verifyFocus(0)},onShow:function(){this.sendVerifyCode(),this.isAgree=!!this.isReadArgeen[PAGE_TYPE.loan]&&this.isReadArgeen[PAGE_TYPE.loan]},onHide:function(){},methods:(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)({},p.mapMutations(["updateSignInData"])),f(["verifyCodeSend","verifyCodeCheck"])),p.mapActions(["doSignIn"])),v.mapMutations(["updateSentinelFlag"])),{},{getTrackData:function(){var e=this.$track.getVrifyData();return(0,o.default)((0,o.default)({},e),this.pageTrackData)},back:function(){uni.navigateBack({})},updateCodeLoading:function(e){this.codeLoading=e},verifyInputChange:function(e,t){var n=e.detail.value;this.$refs;if(this.verifyList[t]=n,""===n){var a=t-1;-1!==a&&(this.vList[a]=!0)}else{a=t+1;this.vList[a]=6!==a}this.verifyList.splice(t,1,n);var i=this.verifyList.join("");!0!==this.isInvoking&&(this.verifyCode=i,i&&6===i.length&&this.onPostLogin())},verifyFocus:function(e){this.vList[e]=!0},verifyBlur:function(e){this.vList[e]=!1},getVerify:function(){uni.showLoading({mask:!0,title:"请稍候"}),this.sendVerifyCode()},getVrifyData:function(e){var t=this.$track.getVrifyData(),n=(0,o.default)((0,o.default)({},t),{org_id:"12345",eventType:"07",mobile:e});return n},sendVerifyCode:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var n,a,s,r,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSendVerify=!1,e.$track.setData((0,i.default)({},e.$trackParams.smsCode.enroll_smsv_code_count,1)),a=e.getVrifyData(e.mobile),t.next=5,d.default.getDeviceToken();case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0="";case 8:return s=t.t0,a.device_token=s,r={},e.sentinelFlag&&(r.pwdCode=e.sentinelFlag.pwdCode,r.authType="5"),t.next=14,e.verifyCodeSend((0,o.default)({busType:"7",fraudContent:JSON.stringify(a),mobileNo:e.mobile,effectTime:300},r));case 14:u=t.sent,u&&u.data&&"1"===u.data.sendFlag&&"1000"===u.code?(e.updateCodeLoading(!0),e.isGetverifyCode=!0,e.codeTimeout(),uni.hideLoading()):"5"==(null===u||void 0===u||null===(n=u.data)||void 0===n?void 0:n.authType)?setTimeout((function(){e.vList=[!1,!1,!1,!1,!1,!1],e.smsImage=!0,e.codeSecond=90,e.updateCodeLoading(!1),clearInterval(e.intval),e.intval=null,uni.hideLoading()}),2e3):uni.hideLoading(),e.updateSentinelFlag("");case 17:case"end":return t.stop()}}),t)})))()},successSms:function(e){var t=this;setTimeout((function(){t.smsImage=!1}),200),e&&(this.updateSentinelFlag((0,o.default)({},e)),this.getVerify())},codeTimeout:function(){var e=this,t=this.codeSecond;this.intval=setInterval((function(){t-=1,t>0?e.codeSecond=t:(e.codeSecond=90,e.updateCodeLoading(!1),clearInterval(e.intval),e.intval=null)}),1e3)},onPostLogin:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var n,a,s,o,u,d,l,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.mobile,a=e.verifyCode,s="",(0,r.isMobile)(n)?!1===e.isGetverifyCode?s="请获取验证码":""===a?s="请输入验证码":a.length<6&&(s="请输入正确的验证码"):s="手机号码非法",!s){t.next=8;break}c.default.alert({content:s}),t.next=28;break;case 8:return e.loading=!0,e.isInvoking=!0,t.next=12,e.verifyCodeCheck({type:"7",mobile:e.mobile,value:e.verifyCode});case 12:if(o=t.sent,!o||!o.data||"1000"!==o.code){t.next=24;break}return u=o.data,"login"===e.type&&e.updateSignInData({pwdCode:u.pwdCode}),d=e.getTrackData(),t.next=19,e.doSignIn({trackData:d});case 19:l=t.sent,f=e.$trackParams.login.oneclick_login_otherphone_sucess,l&&"1000"===l.code?(e.$track.setData((0,i.default)({},f.name,f.success)),e.$track.updateGlobalData({mobile:e.data.mobile,userId:e.data.userId?e.data.userId:"",uuid:e.data.userId?e.data.userId:""}),c.default.toast("登录成功","none",!0),setTimeout((function(){uni.switchTab({url:"../../pages/index/index"})}),1500)):(e.$track.setData((0,i.default)({},f.name,f.fail)),e.isInvoking=!1),t.next=28;break;case 24:e.verifyBlur(),setTimeout((function(){e.verifyList=["","","","","",""]}),1e3),e.loading=!1,e.isInvoking=!1;case 28:t.next=32;break;case 30:t.prev=30,t.t0=t["catch"](0);case 32:return t.prev=32,e.loading=!1,t.finish(32);case 35:case"end":return t.stop()}}),t,null,[[0,30,32,35]])})))()}})};t.default=m},a8fc:function(e,t,n){"use strict";n.r(t);var a=n("f81f"),i=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t["default"]=i.a},e4f5:function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.trade-cancle[data-v-9090ba2e]{width:%?32?%;height:%?32?%;position:absolute;right:%?20?%;top:%?20?%}.incorrect[data-v-9090ba2e]:before{content:"\\2716";color:#ccc}.sms-popup-comp[data-v-9090ba2e]{overflow:hidden;z-index:10080;position:relative;width:%?560?%;height:%?320?%;background-color:#fff;border-radius:%?16?%}.sms-popup-comp .sms-content[data-v-9090ba2e]{padding:0 %?38?%;display:flex}.sms-popup-comp .sms-content uni-image[data-v-9090ba2e]{width:%?172?%;height:%?68?%;margin-left:%?16?%}.sms-popup-comp .sms-content uni-input[data-v-9090ba2e]{width:%?266?%;height:%?68?%;line-height:%?68?%;padding-left:%?20?%;border-radius:%?8?%;border:1px solid #eaeaea}.sms-popup-comp .sms-text[data-v-9090ba2e]{text-align:center;color:#e73339;line-height:%?84?%;position:absolute;bottom:0;width:100%;border-top:1px solid #eaeaea}',""]),e.exports=t},f203:function(e,t,n){var a=n("e4f5");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("6a398fa8",a,!0,{sourceMap:!1,shadowMode:!1})},f81f:function(e,t,n){"use strict";var a=n("4ea4");n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var i=a(n("1da1")),s=a(n("5530")),o=n("26cb"),r=n("8e55"),u=(0,o.createNamespacedHelpers)("signIn"),c=u.mapActions,d={data:function(){return{showImageCode:"",smsImageInput:"",PICTURE_URL:r.PICTURE_URL}},props:{showSmsImagePop:{type:Boolean,default:!1},phoneNumber:{type:String,default:""},propsZindex:{type:Number,default:99}},watch:{showSmsImagePop:function(e){e&&(this.getImageSms(),this.open())}},methods:(0,s.default)((0,s.default)({},c(["getImageCode","verifyImageCode"])),{},{closePop:function(){this.initInput(),this.close(),this.$emit("successSms",!1)},getImageSms:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getImageCode({phoneNumber:e.phoneNumber});case 2:n=t.sent,n&&"1000"===n.code&&(e.showImageCode=n.data.imageCode);case 4:case"end":return t.stop()}}),t)})))()},submitSmsImage:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.smsImageInput){t.next=3;break}return e.$utils.toast("请输入验证码"),t.abrupt("return");case 3:return t.next=5,e.verifyImageCode({imageCode:e.smsImageInput,phoneNumber:e.phoneNumber});case 5:n=t.sent,"1000"===(null===n||void 0===n?void 0:n.code)?e.$emit("successSms",n.data):("3037"===(null===n||void 0===n?void 0:n.code)&&e.$utils.toast("验证码已过期"),e.getImageSms(),e.$emit("successSms",!1)),e.close(),e.initInput();case 9:case"end":return t.stop()}}),t)})))()},initInput:function(){this.smsImageInput=""},open:function(){var e=this;this.$nextTick((function(){e.$refs.popupSms.open()}))},close:function(){this.$refs.popupSms.close(),this.initIamge()},initIamge:function(){this.showImageCode=""}})};t.default=d},fbf1:function(e,t,n){"use strict";n.r(t);var a=n("76b6"),i=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t["default"]=i.a},fe89:function(e,t,n){"use strict";n.r(t);var a=n("61c7"),i=n("a8fc");for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n("31d2");var o,r=n("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"9090ba2e",null,!1,a["a"],o);t["default"]=u.exports}}]);