(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-settleRecordsOfDownload-settleRecordsOfDownload"],{1712:function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n}));var n={navBar:a("b560").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"containers",class:t.isCheckWX?"containersWx":"",style:t.listSettlement[0]&&t.listSettlement[0].sendState?"":"background-color: #FFFFFF"},[a("v-uni-view",{staticClass:"navi-con"},[a("nav-bar",{attrs:{customLeftEvent:!0,title:"证明记录"},on:{clickLeft:function(e){arguments[0]=e=t.$handleEvent(e),t.onPageBack.apply(void 0,arguments)}}})],1),a("mescroll-body-diy",{ref:"mescrollRef",attrs:{down:t.downOption,topbar:!0,height:t.isCheckWX?"100%":"88%",up:t.upOption,fixed:!1},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.upCallback.apply(void 0,arguments)}}},[t.showNoData?[a("no-data",{attrs:{srcImg:"jkjl_icon_zwjk.png",describe:"暂无记录"}})]:a("v-uni-view",{staticClass:"list-con"},[t._e(),t._l(t.listSettlement,(function(e,n){return a("v-uni-view",{key:n,staticClass:"zujian",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onClickItem(e)}}},[a("v-uni-view",{staticClass:"top-con"},[a("v-uni-view",{staticClass:"time"},[t._v(t._s(e.settleTime))]),"S"==e.sendState?a("v-uni-view",{staticClass:"zhuangtai",staticStyle:{background:"#F0F0F0",color:"#A7A7A7"}},[t._v(t._s(t._f("stateTrans")(e.sendState)))]):"F"==e.sendState?a("v-uni-view",{staticClass:"zhuangtai",staticStyle:{background:"#FFEEEE",color:"#EE1710"}},[t._v(t._s(t._f("stateTrans")(e.sendState)))]):"O"==e.sendState?a("v-uni-view",{staticClass:"zhuangtai"},[t._v(t._s(t._f("stateTrans")(e.sendState)))]):t._e()],1),a("v-uni-view",{staticClass:"bottom"},[t.showDownload(e.sendState)?a("v-uni-view",{staticClass:"flex-box flex-column"},t._l(e.files,(function(o,i){return a("v-uni-view",{key:i,staticClass:"flex-box align-center justify-between",staticStyle:{"margin-top":"30rpx","margin-bottom":"30rpx"}},[a("v-uni-view",{staticClass:"file-name"},[t._v(t._s(t._f("getName")(o.fileName)))]),a("v-uni-view",{staticClass:"download",class:t.currDownloadItemState.index===n&&t.currDownloadItemState.subIndex===i&&t.currDownloadItemState.downloading?"downloaded":"",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onClickDownLoad(e,n,o,i)}}},[t._v("打开")])],1)})),1):a("v-uni-view",{staticClass:"provide",staticStyle:{"margin-top":"30rpx","margin-bottom":"30rpx"}},[t._v(t._s(t._f("settleTypes")(e.settleType))+"借款结清证明")])],1)],1)}))],2)],2)],1)],1)},i=[]},"19b0":function(t,e,a){var n=a("6ff2");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("4f06").default;o("17acaa48",n,!0,{sourceMap:!1,shadowMode:!1})},3425:function(t,e,a){"use strict";(function(t){var n=a("4ea4");a("99af"),a("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a("2909"));a("96cf");var i=n(a("1da1")),r=n(a("5530")),s=a("26cb"),l=a("8e55"),d=a("2771"),c=n(a("7ec2")),u=n(a("0a34")),f=n(a("6a7d")),g=n(a("dd53")),m=(0,s.createNamespacedHelpers)("loan"),p=m.mapState,v=m.mapActions,w=(m.mapMutations,(0,s.createNamespacedHelpers)("settleRecord")),h=1,b={mixins:[g.default],data:function(){return{showNoData:!1,listSettlement:[],currDownloadItemState:{index:-1,subIndex:-1,downloading:!1},isSingleAllSettle:"",downOption:{auto:!1,inOffsetRate:.5},upOption:{auto:!0,textNoMore:"",noMoreSize:1,empty:{use:!1}},fileList:[],popInfo:[{icon:"../static/imgs/ios.png",osName:"IOS系统",message:"可通过手机应用-文件，查找已下载的pdf结清证明文件"},{icon:"../static/imgs/android.png",osName:"Android系统",message:"可通过手机应用-文件管理-文档，查找已下载的pdf结清证明文件"}]}},computed:(0,r.default)((0,r.default)((0,r.default)({},p(["listSettleRecordsData"])),w.mapState(["progressData"])),{},{showDownload:function(){return function(t){return"F"!==t&&"O"!==t}},showOpenBtn:function(){return function(t,e){var a=this.downloadingFiles[t];if(!a)return!0;var n=this.downloadingFiles[t][e];return!n}}}),components:{noData:c.default,MescrollBodyDiy:f.default},filters:{stateTrans:function(t){var e={S:"已开具",F:"失败",O:"处理中"};return e[t]},settleTypes:function(t){var e={"00":"全部","01":"单笔"};return e[t]},getName:function(t){if(t&&t.length>16){var e=t.substring(0,8)+"..."+t.substring(t.length-8,t.length);return e}return t}},onLoad:function(){h=1},methods:(0,r.default)((0,r.default)((0,r.default)((0,r.default)({},v(["listSettleRecords"])),w.mapActions(["downLoadFile","updateDownloadFlag"])),w.mapMutations(["updateProgress"])),{},{onPageBack:function(){u.default.navigateBack("proofSettle")},onClickItem:function(t){"O"!==t.sendState?"F"!==t.sendState||u.default.toast("证明开具失败，请重新申请"):u.default.toast("证明开具处理中，请稍后查看")},downCallback:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.mescroll.resetUpScroll(!1);case 1:case"end":return e.stop()}}),e)})))()},upCallback:function(e){var a=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var i,r,s,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.log("upCallback",e),1!=e.num){n.next=8;break}return n.next=4,a.listSettleRecords({pageNum:h});case 4:i=n.sent,i&&i.data&&(a.listSettleRecordsData.settleRecords&&a.listSettleRecordsData.settleRecords.length>0&&(a.listSettlement=a.listSettleRecordsData.settleRecords),a.upDateShowNoData(a.listSettlement<=0)),n.next=12;break;case 8:return n.next=10,a.listSettleRecords({pageNum:e.num});case 10:i=n.sent,i&&i.data&&a.listSettleRecordsData.settleRecords&&a.listSettleRecordsData.settleRecords.length>0&&(a.listSettlement=[].concat((0,o.default)(a.listSettlement),(0,o.default)(a.listSettleRecordsData.settleRecords)));case 12:r=i.totalNum,s=a.listSettleRecordsData.settleRecords,l=s.length,d=l<=0,d||a.mescroll.showNoMore(),a.mescroll.endBySize(l,r),a.mescroll.endSuccess(l);case 19:case"end":return n.stop()}}),n)})))()},upDateShowNoData:function(t){this.showNoData=t},startDownloadForH5:function(e,a,n,o){var i=this,r=uni.getStorageSync("userInfo"),s="".concat(l.AJAX_URL).concat(d.downloadSettle,"?id=").concat(n.id,"&tenantId=").concat(l.TENANT_ID,"&userId=").concat(r.userId);if(t.log("1111111111",navigator.userAgent),navigator.userAgent.indexOf("MSIE")>=0&&navigator.userAgent.indexOf("Opera")<0){var c=window.open(s,"_blank","height=0,width=0,toolbar=no,menubar=no,scrollbars=no,resizable=on,location=no,status=no");c.document.execCommand("SaveAs"),c.window.close(),c.close()}else if(window.navigator.msSaveBlob)window.open(s);else if(navigator.userAgent.indexOf("UCBrowser")>=0){t.log("aaaaaaaaaaaaUC");var u=document.createElement("a");u.setAttribute("href",s),u.setAttribute("download","");var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,document.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),u.dispatchEvent(f),u.remove();c=window.open(s,"_blank","height=0,width=0,toolbar=no,menubar=no,scrollbars=no,resizable=on,location=no,status=no");c.document.execCommand("SaveAs"),c.window.close(),c.close()}else{u=document.createElement("a");u.setAttribute("href",s),u.setAttribute("download","");f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,document.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),u.dispatchEvent(f),u.remove()}var g=i.currDownloadItemState.index===a&&i.currDownloadItemState.subIndex===o&&i.currDownloadItemState.downloading;g&&i.updateDownloadingFiles(a,o,!1)},onClickDownLoad:function(t,e,a,n){var o=this.currDownloadItemState,i=!o.index||!o.subIndex||!o.downloading,r=o.index===e&&o.subIndex===n&&!o.downloading;(i||r)&&(this.updateDownloadingFiles(e,n,!0),this.startDownloadForH5(t,e,a,n))},startDownload:function(e,a,n,o){var i=this,r="".concat(wx.env.USER_DATA_PATH,"/").concat(n.fileName);t.log("cccccc",r);i.downLoadFile({id:n.id,filePath:r,fileName:n.fileName,success:function(t){wx.getFileSystemManager();var e=i.currDownloadItemState.index===a&&i.currDownloadItemState.subIndex===o&&i.currDownloadItemState.downloading;e&&(i.updateDownloadingFiles(a,o,!1),i.openDocument(r))},fail:function(t){i.updateDownloadingFiles(a,o,!1)}})},updateDownloadingFiles:function(e,a,n){t.log("updateDownloadingFiles",e,a,n),this.currDownloadItemState.index=e,this.currDownloadItemState.subIndex=a,this.currDownloadItemState.downloading=n,t.log("updateDownloadingFiles",this.currDownloadItemState)},openDocument:function(e){uni.openDocument({filePath:e,showMenu:!0,fileType:"pdf",success:function(e){t.log("打开文档成功")}})},onClickProgress:function(t,e,a,n){var o=this.currDownloadItemState.index===e&&this.currDownloadItemState.subIndex===n&&this.currDownloadItemState.downloading;o&&this.updateDownloadingFiles(e,n,!1),this.updateProgress({progress:0})}})};e.default=b}).call(this,a("5a52")["default"])},"499f":function(t,e,a){"use strict";a.r(e);var n=a("1712"),o=a("fa96");for(var i in o)"default"!==i&&function(t){a.d(e,t,(function(){return o[t]}))}(i);a("8004");var r,s=a("f0c5"),l=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"560eaaf6",null,!1,n["a"],r);e["default"]=l.exports},"6ff2":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.navi-con[data-v-560eaaf6]{position:fixed!important;left:0;right:0;top:0;z-index:10}.containers[data-v-560eaaf6]{background-color:#f5f5f5;width:102%;overflow:hidden;height:99vh;padding-top:%?85?%}.containers[data-v-560eaaf6]  .mescroll-uni{height:98%!important}.containers .tip-btn[data-v-560eaaf6]{width:%?332?%;height:%?68?%;border:.5px solid #c8cad1;margin:0 auto;border-radius:%?34?%;margin-top:%?36?%;margin-bottom:%?36?%;font-family:PingFang-SC-Regular;font-size:%?24?%;color:#5e657a;letter-spacing:0;text-align:center;font-weight:400}.containers .tip-btn .tip-img[data-v-560eaaf6]{width:%?24?%;height:%?24?%;margin-right:%?12?%}.pop-con[data-v-560eaaf6]{margin-left:%?64?%;margin-right:%?64?%;background:#fff;border-radius:%?24?%;padding:%?60?% %?40?%}.pop-con .item-con[data-v-560eaaf6]{background:#f6f7f7;border-radius:%?26?%;padding:%?30?% %?12?% %?30?% %?24?%;margin-bottom:%?32?%}.pop-con .item-con .icon[data-v-560eaaf6]{width:%?88?%;height:%?88?%;margin-right:%?14?%}.pop-con .item-con .osName[data-v-560eaaf6]{font-family:SourceHanSansCN-Medium;font-size:%?32?%;color:#333;letter-spacing:0;line-height:%?32?%;font-weight:500;margin-bottom:%?14?%}.pop-con .item-con .message[data-v-560eaaf6]{font-family:SourceHanSansCN-Regular;font-size:%?26?%;color:#aaafb7;letter-spacing:0;line-height:44tpx;font-weight:400}.pop-con .tip-con[data-v-560eaaf6]{font-family:SourceHanSansCN-Regular;font-size:%?24?%;color:#999;letter-spacing:0;line-height:%?40?%;font-weight:400;margin-bottom:%?24?%}.pop-con .btn[data-v-560eaaf6]{background-image:linear-gradient(90deg,#fb6e4d,#f83b2b);border-radius:%?16?%;width:100%;height:%?98?%;font-family:PingFang-SC-Regular;font-size:%?32?%;color:#fff;letter-spacing:0;text-align:center;font-weight:400;line-height:%?98?%;vertical-align:middle}.containersWx[data-v-560eaaf6]{height:100vh}.otherStyle[data-v-560eaaf6]{background-color:#d8d8d8;color:#fff}.list-con[data-v-560eaaf6]{padding:%?30?% %?50?% 0 %?30?%}.zujian[data-v-560eaaf6]{margin-bottom:%?32?%;padding:0 %?32?%;border-radius:8px;background-color:#fff}.zujian .top-con[data-v-560eaaf6]{height:%?90?%;display:flex;justify-content:space-between;align-items:center;font-size:%?32?%;color:#333;border-bottom:1px solid #f2f2f2}.zujian .top-con .zhuangtai[data-v-560eaaf6]{width:%?96?%;height:%?36?%;margin-right:%?20?%;font-size:%?24?%;color:#407ef0;background:#ecf3ff;border-radius:%?4?%;text-align:center}.zujian .bottom[data-v-560eaaf6]{display:flex;justify-content:center;flex-direction:column;font-size:%?28?%;color:#333;font-weight:500}.zujian .bottom .exmail[data-v-560eaaf6]{color:#999}.zujian .bottom .file-name[data-v-560eaaf6]{width:%?342?%;overflow:hidden}.zujian .bottom .download[data-v-560eaaf6]{width:%?144?%;height:%?52?%;background:#ee1710;border-radius:%?26?%;text-align:center;vertical-align:middle;line-height:%?52?%;color:#fff}.zujian .bottom .downloaded[data-v-560eaaf6]{background:#f57470}',""]),t.exports=e},8004:function(t,e,a){"use strict";var n=a("19b0"),o=a.n(n);o.a},fa96:function(t,e,a){"use strict";a.r(e);var n=a("3425"),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=o.a}}]);