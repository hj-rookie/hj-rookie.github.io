(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-idCard-idCard"],{"2c4c":function(t,e,a){var n=a("84d0");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("3436c58e",n,!0,{sourceMap:!1,shadowMode:!1})},"768e":function(t,e,a){"use strict";var n=a("2c4c"),i=a.n(n);i.a},"84d0":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.container-style[data-v-40a60ed4]{background-color:#fff;min-height:calc(100vh - 0px)}.container-style .tip-text[data-v-40a60ed4]{width:100%;margin-top:%?60?%;text-align:center}.tip-info[data-v-40a60ed4]{height:%?68?%;line-height:%?68?%;background-color:#fef4e7}.tip-info uni-image[data-v-40a60ed4]{width:%?32?%;height:%?32?%;margin-left:%?26?%;margin-right:%?6?%;vertical-align:middle}.tip-info uni-text[data-v-40a60ed4]{font-size:%?24?%;color:#f59e19}.button-container uni-button[data-v-40a60ed4]{border-radius:0}.marginTop[data-v-40a60ed4]{margin-top:%?252?%}.marginTopSubmit[data-v-40a60ed4]{margin-top:%?152?%}.bgColor[data-v-40a60ed4]{background-color:#f4f4f4}.paddingBtm[data-v-40a60ed4]{padding-bottom:%?190?%}.credit-guide-hint .credit-guide-title[data-v-40a60ed4]{text-align:center;justify-content:center;font-size:%?28?%;color:#666;position:relative}.credit-guide-hint .credit-guide-title[data-v-40a60ed4]::before{content:"";width:%?259?%;height:%?1?%;position:absolute;top:50%;left:%?32?%;background-color:#eaeaea}.credit-guide-hint .credit-guide-title[data-v-40a60ed4]::after{content:"";width:%?259?%;height:%?1?%;position:absolute;top:50%;right:%?32?%;background-color:#eaeaea}.credit-guide-hint .credit-guide-imgs[data-v-40a60ed4]{padding:0 %?52?%;display:flex;justify-content:space-around;margin-top:%?28?%}.credit-guide-hint .credit-guide-imgs uni-image[data-v-40a60ed4]{width:%?140?%;height:%?146?%}.credit-guide-hint .credit-guide-imgs uni-image[data-v-40a60ed4]:last-child{margin-right:0!important}.credit-guide-correct[data-v-40a60ed4]{margin-top:%?46?%}.credit-guide-correct uni-image[data-v-40a60ed4]{width:%?288?%;height:%?176?%}.credit-guide-correct uni-button[data-v-40a60ed4]{width:%?658?%;height:%?92?%;line-height:%?92?%;margin-top:%?42?%;background-color:#ee1710;color:#fff}',""]),t.exports=e},a3f7:function(t,e,a){"use strict";a.r(e);var n=a("bfa0"),i=a("f5e0");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("768e");var d,o=a("f0c5"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"40a60ed4",null,!1,n["a"],d);e["default"]=c.exports},bfa0:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var n={navBar:a("b560").default,idCard:a("e07f").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{class:["container-style",t.idCardData.idCardBack&&t.idCardData.idCardFront&&t.idCardData.certDate&&"updateIdcardInfo"===t.queryType?"paddingBtm bgColor":"paddingBtm"]},[n("nav-bar",{attrs:{title:"身份认证",customLeftEvent:!0},on:{clickLeft:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePageBack.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"tip-info"},[n("v-uni-image",{attrs:{src:a("e819"),mode:""}}),n("v-uni-text",[t._v("他人代操作及线下收费，都是骗子，请妥善保管好个人信息")])],1),"changeMobile"===t.queryType?n("v-uni-view",{staticClass:"tip-text"},[n("v-uni-text",{staticClass:"fs-36 color-black-3"},[t._v("您正在为 "+t._s(t._f("confusePhoneNumber")(t.mobile))+" 更换手机号码")])],1):t._e(),n("id-card",{ref:"idCardComp",attrs:{"event-type":t.eventType},on:{start:function(e){arguments[0]=e=t.$handleEvent(e),t.start.apply(void 0,arguments)},end:function(e){arguments[0]=e=t.$handleEvent(e),t.end.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.onUserInfoChange.apply(void 0,arguments)},uploaded:function(e){arguments[0]=e=t.$handleEvent(e),t.apiResult.apply(void 0,arguments)}}}),t.idCardData.idCardBack&&t.idCardData.idCardFront?n("v-uni-view",{staticClass:"button-wap"},["changeMobile"===t.queryType?n("v-uni-button",{class:["button",t.idCardData.idCardBack&&t.idCardData.idCardFront?"":"marginTopSubmit",t.submitEnabled?"button-can":""],attrs:{loading:t.loading,disabled:!t.submitEnabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSubmit.apply(void 0,arguments)}}},[t._v("下一步")]):n("v-uni-button",{class:["button",t.idCardData.idCardBack&&t.idCardData.idCardFront?"":"marginTop",t.submitEnabled?"button-can":""],attrs:{loading:t.loading,disabled:!t.submitEnabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSubmit.apply(void 0,arguments)}}},[t._v("提交")])],1):t._e(),t.showGuide?n("v-uni-view",{staticClass:"credit-guide-hint"},[n("v-uni-view",{staticClass:"credit-guide-title"},[t._v("上传须知")]),n("v-uni-view",{staticClass:"credit-guide-imgs"},t._l([1,2,3,4],(function(t){return n("v-uni-image",{key:t,attrs:{src:"../static/imgs/ocr/sfrz_img_"+t+".png",mode:""}})})),1)],1):t._e(),n("popup-content",{attrs:{showPopup:t.isShowPopup}},[n("v-uni-view",{staticClass:"credit-guide-correct flex-box flex-column align-center"},[n("v-uni-image",{attrs:{src:a("e546"),mode:""}}),n("v-uni-text",{staticClass:"fs-36 color-black-3",staticStyle:{"margin-top":"32rpx","font-weight":"bold"}},[t._v("身份证识别失败")]),n("v-uni-text",{staticClass:"fs-24",staticStyle:{"margin-top":"16rpx",color:"#8C8EA0"}},[t._v("请确保照片边框完整，亮度均匀，字体清晰，无信息遮挡")]),n("v-uni-view",{staticClass:"credit-guide-hint",staticStyle:{"margin-top":"64rpx"}},[n("v-uni-view",{staticClass:"credit-guide-title"},[t._v("上传须知")]),n("v-uni-view",{staticClass:"credit-guide-imgs"},t._l([1,2,3,4],(function(t){return n("v-uni-image",{key:t,staticStyle:{"margin-right":"20rpx"},attrs:{src:"../static/imgs/ocr/sfrz_img_"+t+".png",mode:""}})})),1)],1),n("v-uni-button",{staticClass:"fs-32",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShowPopup=!1}}},[t._v("我知道了")])],1)],1)],1)},r=[]},c6be:function(t,e,a){"use strict";(function(t){var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i,r,d,o,c,u=n(a("1da1")),s=n(a("5530")),l=a("26cb"),f=n(a("0a34")),p=n(a("2359")),g=(0,l.createNamespacedHelpers)("factor"),v=g.mapState,h=(g.mapGetters,g.mapActions),m=g.mapMutations,b=(0,l.createNamespacedHelpers)("signIn"),y=(0,l.createNamespacedHelpers)("verify"),C={ocr:"changeIdentify",changeMobile:"changeMobile",resetTradePassword:"resetTradePassword",updateIdcardInfo:"updateIdcardInfo"},w={data:function(){return{eventType:"",loading:!1,queryType:"",mobile:"",isShowPopup:!1}},components:{popupContent:p.default},computed:(0,s.default)((0,s.default)((0,s.default)({},v(["idCardData"])),b.mapState({userData:"data"})),{},{submitEnabled:function(){var t=this.idCardData;return!this.loading&&!!t.name&&!!t.certNo&&!!t.idCardBack&&!!t.idCardFront&&!!t.certOffice&&!!t.address},showGuide:function(){var t=this.idCardData;return!(t.idCardBack&&t.idCardFront&&t.certDate&&"updateIdcardInfo"===this.queryType)}}),onLoad:function(t){var e=this;this.queryType=t.type,r=t.type||"ocr",d=t.fromType||"",c=t.pageFlags,this.mobile=t.mobile,this.eventType=C[r],this.btnTxt=this.eventType===C.updateIdcardInfo?"提交":"下一步",i=this.$store.getters.homeData(),this.$nextTick((function(){e.clearIdCardData()}))},onUnload:function(){this.clearLifeData(),this.clearIdCardData()},methods:(0,s.default)((0,s.default)((0,s.default)((0,s.default)({},m(["clearLifeData","clearIdCardData","updateChangeMobileInfo"])),h(["userInfoUpdate"])),y.mapActions(["userInfoVerify"])),{},{apiResult:function(t){"3018"===t.result.code&&(this.isShowPopup=!0)},start:function(){this.loading=!0},end:function(){this.loading=!1},h5back:function(){"changeMobile"===r&&"validMobile"===d?f.default.navigateBackMPH5(2):(t.log("go----"),f.default.navigateBackMPH5())},handlePageBack:function(){this.clearIdCardData(),this.h5back()},onSubmit:function(){this.eventType===C.updateIdcardInfo?this.checkSubmitData(this.updateUserInfo):this.checkIdentity()},onUserInfoChange:function(t){"changeMobile"===this.queryType&&t.value&&this.updateChangeMobileInfo({name:t.value.name,idCard:t.value.idCard})},tipMsg:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e?f.default.toast(t):a?f.default.alert({content:t,onSuccess:function(){uni.reLaunch({url:"/pages/index/index"})}}):f.default.alert({content:t})},checkIdentity:function(){var t=this;return(0,u.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.idCardData,e.next=3,t.verifyuserInfo();case 3:a=e.sent,a?("1"===i.biopsyType||"3"===i.biopsyType||o?"changeMobile"===t.queryType?f.default.navigateTo("faceRecordStart",{subcontract:"A",fromType:r}):f.default.navigateTo("faceRecordStart",{subcontract:"A",type:r,fromType:d,pageFlags:c}):"changeMobile"===t.queryType?f.default.navigateTo("newCollet",{type:r,subcontract:!0}):f.default.navigateTo("newCollet",{type:r,fromType:d,subcontract:!0},!0),t.clearLifeData(),t.clearIdCardData()):t.tipMsg("身份认证失败",!0);case 5:case"end":return e.stop()}}),e)})))()},updateUserInfo:function(){var t=this;return(0,u.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.userInfoUpdate();case 2:if(a=e.sent,!a||"3004"!==a.code){e.next=7;break}return f.default.alert({content:"证件已过期，请更新证件后提交。"}),t.clearIdCardData(),e.abrupt("return");case 7:a&&"1000"===a.code&&a.data&&t.tipMsg("身份信息更新成功",!1,!0);case 8:case"end":return e.stop()}}),e)})))()},checkSubmitData:function(t){var e=this;return(0,u.default)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.idCardData,a.next=3,e.verifyuserInfo();case 3:if(n=a.sent,n){a.next=8;break}return e.clearIdCardData(),e.tipMsg("身份证信息与原信息不匹配，请核对信息后重新上传"),a.abrupt("return",!1);case 8:t();case 9:case"end":return a.stop()}}),a)})))()},clearIdCardData:function(){var t=this.$refs.idCardComp;t.clearPhoto()},verifyuserInfo:function(){var t=this;return(0,u.default)(regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.idCardData,n={userName:a.name,idCard:a.certNo},o=uni.getStorageSync("mobileNum_not_login"),o&&(n.mobileNo=o),e.next=6,t.userInfoVerify(n);case 6:if(i=e.sent,!i||"1000"!==i.code){e.next=10;break}if("1"!==i.data.result){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))()}})};e.default=w}).call(this,a("5a52")["default"])},f5e0:function(t,e,a){"use strict";a.r(e);var n=a("c6be"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a}}]);