(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-verifyTradePs-verifyTradePs"],{"0326":function(e,t,a){"use strict";a.r(t);var n=a("ea38"),r=a("821a");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("2623");var o,s=a("f0c5"),d=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"6bb88b3e",null,!1,n["a"],o);t["default"]=d.exports},2623:function(e,t,a){"use strict";var n=a("cc44"),r=a.n(n);r.a},"821a":function(e,t,a){"use strict";a.r(t);var n=a("dea5"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"95c9":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,'.tp-view-box1[data-v-6bb88b3e]{display:flex;\n\t/* height: 380rpx; */align-items:center;flex-direction:column;justify-content:center}.view-box[data-v-6bb88b3e]{width:%?680?%;height:%?94?%;display:flex;justify-content:space-around;border-radius:5px\n\t/* border: 1px solid #b2b2b2; */}.view-box .k[data-v-6bb88b3e]{flex-grow:1;position:relative;border-bottom:1px solid #b2b2b2;margin-left:%?30?%\n\t/* border-right: 1px solid #b2b2b2; */}\n\n/* .view-box .k:last-child {\n\tborder: 0;\n} */.view-box .k[data-v-6bb88b3e]:first-child{margin-left:0}.view-box .k.s[data-v-6bb88b3e]::after{top:50%;left:50%;content:" ";width:%?24?%;height:%?24?%;display:block;position:absolute;border-radius:100%;background-color:#000;margin:%?-12?% 0 0 %?-12?%}.bh-line[data-v-6bb88b3e]{width:%?680?%;text-align:right;margin-top:%?20?%}.bh-line uni-view[data-v-6bb88b3e]{color:#336cee;font-size:%?30?%}.kb-box[data-v-6bb88b3e]{width:100%;height:%?440?%}.kb-box .js[data-v-6bb88b3e]{display:flex}.js .j[data-v-6bb88b3e]{flex-grow:1;height:%?110?%;border-top:1px solid #e5e5e5;border-right:1px solid #e5e5e5}.js .j>uni-view[data-v-6bb88b3e]{width:100%;height:100%;position:relative}.keyboard[data-v-6bb88b3e],\n.backspace[data-v-6bb88b3e]{top:50%;left:50%;position:absolute}.backspace[data-v-6bb88b3e]{width:%?50?%;height:%?32?%;margin:%?-16?% 0 0 %?-25?%}.keyboard[data-v-6bb88b3e]{width:%?60?%;height:%?52?%;margin:%?-26?% 0 0 %?-30?%}.js .j>uni-view[data-v-6bb88b3e]::after{top:50%;left:50%;width:%?80?%;height:%?80?%;display:block;font-size:%?50?%;text-align:center;position:absolute;margin:%?-40?% 0 0 %?-40?%}.js .j.j1>uni-view[data-v-6bb88b3e]::after{content:"1"}.js .j.j2>uni-view[data-v-6bb88b3e]::after{content:"2"}.js .j.j3>uni-view[data-v-6bb88b3e]::after{content:"3"}.js .j.j4>uni-view[data-v-6bb88b3e]::after{content:"4"}.js .j.j5>uni-view[data-v-6bb88b3e]::after{content:"5"}.js .j.j6>uni-view[data-v-6bb88b3e]::after{content:"6"}.js .j.j7>uni-view[data-v-6bb88b3e]::after{content:"7"}.js .j.j8>uni-view[data-v-6bb88b3e]::after{content:"8"}.js .j.j9>uni-view[data-v-6bb88b3e]::after{content:"9"}.js .j.j0>uni-view[data-v-6bb88b3e]::after{content:"0"}.js .j[data-v-6bb88b3e]:last-child{border-right:0}.js .j.c[data-v-6bb88b3e]{background-color:#ececec}.xz[data-v-6bb88b3e]{-webkit-animation:turn-data-v-6bb88b3e 1s linear infinite;animation:turn-data-v-6bb88b3e 1s linear infinite}@-webkit-keyframes turn-data-v-6bb88b3e{0%{-webkit-transform:rotate(0deg)}25%{-webkit-transform:rotate(90deg)}50%{-webkit-transform:rotate(180deg)}75%{-webkit-transform:rotate(270deg)}100%{-webkit-transform:rotate(1turn)}}@keyframes turn-data-v-6bb88b3e{0%{-webkit-transform:rotate(0deg)}25%{-webkit-transform:rotate(90deg)}50%{-webkit-transform:rotate(180deg)}75%{-webkit-transform:rotate(270deg)}100%{-webkit-transform:rotate(1turn)}}',""]),e.exports=t},cc44:function(e,t,a){var n=a("95c9");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("08a61518",n,!0,{sourceMap:!1,shadowMode:!1})},dea5:function(e,t,a){"use strict";(function(e){var n=a("4ea4");a("99af"),a("e25e"),a("ac1f"),a("466d"),a("5319"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),i=n(a("5530")),o=a("26cb"),s=n(a("8e55")),d=n(a("0a34")),c=n(a("8be5")),u=n(a("6388")),l=(0,o.createNamespacedHelpers)("user"),b=(l.mapState,l.mapGetters,l.mapActions),f=(l.mapMutations,(0,o.createNamespacedHelpers)("user")),p=(0,o.createNamespacedHelpers)("password"),v=(0,o.createNamespacedHelpers)("card"),h=(0,o.createNamespacedHelpers)("result"),y={},g={components:{"taian-safekeyboard":c.default,bnsSafekeyboard:u.default},data:function(){return{isShowLayer:!1,valueArray:[],length:0,keyArray:[["j1","j2","j3"],["j4","j5","j6"],["j7","j8","j9"],["c b","j0","c h"]],keyboardData:[{id:"sipKeyboar1",attrs:null},{id:"sipKeyboar2",attrs:null},{id:"sipKeyboar3",attrs:null}],KBSWITCH:s.default.KBSWITCH,fromType:"",pageFromS:"",isOwnerCard:"",bank_mark:s.default.BANK_KB,PICTURE_URL:s.default.PICTURE_URL,pwdInfo:{}}},computed:(0,i.default)({valueView:function(){var e=this.valueArray.concat([]);return e.length<6&&(e.length=6),e}},f.mapState(["base64ServerRandom"])),mounted:function(){"beinongshang"===this.bank_mark&&this.initKeyboard()},onLoad:function(e){this.fromType=e.type,this.pageFromS=e.pageFromS,this.isOwnerCard=e.isOwnerCard},onUnload:function(){e.log(22),e.log(11,this.$refs.skb1),this.$refs.skb1.hiddenKeyboard()},onHide:function(){e.log(22),e.log(11,this.$refs.skb1),this.$refs.skb1.hiddenKeyboard()},methods:(0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)({},h.mapMutations({update:"update"})),v.mapActions(["doBindCard","bindOtherCard"])),v.mapMutations(["updateBindCardData"])),p.mapMutations(["updatePassword"])),p.mapActions(["verifyTradePassword"])),b(["getKeyboardNumber"])),{},{initKeyboard:function(){var e=this.$refs.bnskeyboard;e.randomOffset(),e.setKeyLayout(),e.sendDrawInfo()},bnsShowKeyboard:function(e){var t=this.$refs.bnskeyboard;t.showkeybox(e)},onInput:function(e){this.pwdInfo=e;var t=this.pwdInfo.inputVal.length;this.length=t;for(var a=[],n=1;n<=this.length;n++)a.push(n);this.valueArray=a},show_bnsKeyboard:function(e){this.pwdInfo.hasCursor=e},confirmNumber:function(t){var a=this;this.pwdInfo=t,6!==this.pwdInfo.inputVal.length||this.pwdInfo.isClose?(e.log(5555),this.$refs.bnskeyboard.defaultInput()):this.timer=setTimeout((function(){a.$refs.bnskeyboard.submitKeyBox(),a.valueArray=[]}),1e3)},getEncryptParam:function(e){e&&(y=e,this.checkPs())},handleForget:function(){this.$track.setData({resource_value:"forget_password"}),d.default.navigateTo("validMobile",{type:"resetTradePwd",fromType:"resetTradePassword",pageFlags:"verifyTradePs",subcontract:!0})},showKeyboardWx:function(){this.$refs.skb1.showKeyboard()},show:function(e){this.cb=e,this.length=0,this.valueArray=[],this.getRandom()},onDone:function(e){this.base64EncryptedData=e.value,this.base64EncryptedRc=e.encryptRandomData,this.cipherAttributes=e.cipherAttributes,6===this.length&&(this.checkPs(),this.length=0)},onChange:function(e,t,a){this.length=a;var n=[];if(1===t)for(var r=1;r<=a;r++)n.push(r);else for(r=1;r<=a;r++)n.push(r);this.valueArray=n,6===a&&(a=6)},hidden:function(e){this.$refs["sipKeyboar1"].hideKeyboard()},getRandom:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.getKeyboardNumber({busType:"1"});case 4:a=t.sent,a&&e.cb&&e.cb(a.data.pwdCode),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](1);case 10:return t.prev=10,e.loading=!1,uni.hideLoading(),t.finish(10);case 14:case"end":return t.stop()}}),t,null,[[1,8,10,14]])})))()},handleTapKey:function(e){var t=e.match(/\d$/);if(t&&t.length&&t[0])this.valueArray.length<6?this.valueArray.push(t[0]):6===this.valueArray.length&&this.updatePassword({type:"trade",key:"input",value:this.valueArray.join("")});else{t=e.split(" ");var a=t[1];"b"===a&&this.valueArray.pop()}},clearPs:function(){this.$refs.skb1.clear(),this.loading=!1,this.base64EncryptedData="",this.base64EncryptedRc=""},missPassword:function(t){var a=this,n=t.message,r=n.replace(/[^0-9]/gi,"");if(0!==parseInt(r))return n="交易密码不正确，你还可以输入".concat(r,"次"),void uni.showModal({title:"提示",content:n,confirmText:"确认",showCancel:!1,confirmColor:"#E62C27",success:function(t){t.confirm?e.log("用户点击确定"):t.cancel&&e.log("用户点击取消")}});if("bindCard"===this.fromType)return n="交易密码已锁定，请您重置交易密码后重试",void("tradePasswordSet"===this.pageFromS?d.default.alert({content:n,onSuccess:function(){a.update({type:"bindCard",title:"绑卡失败",backPage:"index",redirect:"index",result:"cancel",desc:"绑卡失败",icon:""}),d.default.navigateTo("result",{isFromRepay:"bindCard",title:"绑卡失败",type:"estRefuse",pageFromS:a.pageFromS},!0)}}):"bindCard"===this.fromType&&d.default.alert({content:n,onSuccess:function(){a.update({type:"bindCard",title:"绑卡失败",backPage:"index",redirect:"index",result:"cancel",desc:"绑卡失败",icon:""}),d.default.navigateTo("result",{isFromRepay:"bindCard",title:"绑卡失败",type:"estRefuse"},!0)}}));n="交易密码已被锁定，请您重置密码后重试";uni.showModal({title:"提示",content:n,cancelText:"重新输入",cancelColor:"#999999",confirmText:"退出",showCancel:!1,confirmColor:"#DEB772",success:function(e){e.confirm?d.default.navigateTo("validMobile",{type:"resetTradePwd",fromType:"resetTradePassword",pageFlags:"verifyTradePs",subcontract:!0}):e.cancel}})},tipFail:function(){this.update({type:"bindCard",title:"提交失败",backPage:"index",redirect:"index",result:"cancel",desc:"",icon:""}),d.default.navigateTo("result",{isFromRepay:"bindCard"},!0)},checkPs:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,n,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a="",e.KBSWITCH&&"chengde"===e.bank_mark?e.base64EncryptedData&&-3!==e.base64EncryptedData?e.base64EncryptedData&&-1!==e.base64EncryptedData||(a="请输入6位数密码"):a="请输入交易密码":"taian"===e.bank_mark&&(e.valueArray.length?e.valueArray.length<6&&(a="请输入6位数密码"):a="请输入交易密码"),!a){t.next=5;break}return d.default.alert({content:a,onSuccess:function(){e.onClose()}}),t.abrupt("return");case 5:return e.loading=!0,uni.showLoading({title:"请稍候"}),n={},n="beinongshang"===e.bank_mark?(0,i.default)({},y):{base64EncryptedData:e.base64EncryptedData,base64EncryptedRc:e.base64EncryptedRc},t.next=11,e.verifyTradePassword((0,i.default)((0,i.default)({},n),{},{busType:"02"}));case 11:if(r=t.sent,"beinongshang"===e.bank_mark&&e.initKeyboard(),uni.hideLoading(),!r){t.next=36;break}if(!r.isError){t.next=22;break}e.loading=!1,e.tipFail(),e.clearPs(),e.onClose(),t.next=34;break;case 22:if("1000"!==r.code){t.next=33;break}return o=uni.getStorageSync("bindData"),o.pwdCode=r.data.pwdCode,o.isPost=!0,uni.showLoading({title:"请稍候..."}),t.next=28,e.doBindCard(o);case 28:s=t.sent,uni.hideLoading(),s&&"1000"===s.code?"tradePasswordSet"===e.pageFromS?d.default.navigateBack("myCard"):"0"===o.isOwnerCard?e.postOtherCardData():uni.navigateBack({delta:1}):s&&"5010"===s.code&&(e.update({type:"bindCard",title:"绑卡失败",backPage:"index",redirect:"index",result:"cancel",desc:"绑卡失败",icon:""}),"tradePasswordSet"===e.pageFromS?d.default.navigateTo("result",{isFromRepay:"bindCard",title:"绑卡失败",pageFromS:e.pageFromS},!0):d.default.navigateTo("result",{isFromRepay:"bindCard",title:"绑卡失败",type:"estRefuse"},!0)),t.next=34;break;case 33:"5007"===r.code?(e.missPassword(r),e.clearPs(),e.onClose(),e.valueArray=[]):(e.tipFail(),e.KBSWITCH&&"chengde"===e.bank_mark&&e.clearPs(),e.onClose(),e.valueArray=[]);case 34:t.next=38;break;case 36:e.tipFail(),e.valueArray=[];case 38:case"end":return t.stop()}}),t)})))()},postOtherCardData:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=uni.getStorageSync("bindData"),e.next=3,t.bindOtherCard(a);case 3:n=e.sent,"1000"===n.code?(t.updateBindCardData({url:n.url,flowNo:n.flowNo}),d.default.navigateTo("thirdParty",{url:n.url,type:"bind",subcontract:!0},!0)):d.default.alert({content:n.message});case 5:case"end":return e.stop()}}),e)})))()}})};t.default=g}).call(this,a("5a52")["default"])},ea38:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={navBar:a("b560").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container",staticStyle:{"background-color":"white"}},[a("nav-bar",{attrs:{title:"交易密码验证"}}),a("v-uni-view",[e.KBSWITCH&&"chengde"===e.bank_mark?a("safe-board",{ref:"skb1",attrs:{isPay:"isPay",id:"skb1",keyboardType:"number",keyboardNumber:"1",placeholder:"输入登录密码"},on:{onDone:function(t){arguments[0]=t=e.$handleEvent(t),e.onDone.apply(void 0,arguments)},show:function(t){arguments[0]=t=e.$handleEvent(t),e.show.apply(void 0,arguments)},onChange:function(t){arguments[0]=t=e.$handleEvent(t),e.onChange.apply(void 0,arguments)}}}):e._e(),a("v-uni-view",{staticClass:"fs-28",staticStyle:{color:"#282828","margin-top":"180upx","margin-left":"35upx"}},[e._v("请输入交易密码")]),a("v-uni-view",{staticClass:"tp-view-box1"},[e.KBSWITCH&&"beinongshang"===e.bank_mark?a("v-uni-view",{staticClass:"view-box",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bnsShowKeyboard("pwd")}}},e._l(e.valueView,(function(e,t){return a("v-uni-view",{key:t,staticClass:"k",class:{s:e}})})),1):e.KBSWITCH&&"chengde"===e.bank_mark?a("v-uni-view",{staticClass:"view-box",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showKeyboardWx.apply(void 0,arguments)}}},e._l(e.valueView,(function(e,t){return a("v-uni-view",{key:t,staticClass:"k",class:{s:e}})})),1):"taian"===e.bank_mark?a("v-uni-view",{staticClass:"view-box",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.taianShowKeyboard.apply(void 0,arguments)}}},["taian"===e.bank_mark?a("taian-safekeyboard",{ref:"taiankeyboardRef",attrs:{sktype:1},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)},change:function(t){arguments[0]=t=e.$handleEvent(t),e.onTradePwChange.apply(void 0,arguments)}}}):e._e(),e._l(e.valueView,(function(e,t){return a("v-uni-view",{key:t,staticClass:"k",class:{s:e}})}))],2):a("v-uni-view",{staticClass:"view-box",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.KBSWITCH&&e.showKeyboard}}},e._l(e.valueView,(function(e,t){return a("v-uni-view",{key:t,staticClass:"k",class:{s:e}})})),1),a("v-uni-view",{staticClass:"bh-line flex-box justify-end"},[a("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleForget.apply(void 0,arguments)}}},[e._v("忘记密码?")])],1)],1)],1),e.KBSWITCH&&"beinongshang"===e.bank_mark?a("v-uni-view",[a("bns-safekeyboard",{ref:"bnskeyboard",on:{confirmNumber:function(t){arguments[0]=t=e.$handleEvent(t),e.confirmNumber.apply(void 0,arguments)},showKeyboard:function(t){arguments[0]=t=e.$handleEvent(t),e.showKeyboard.apply(void 0,arguments)},onInput:function(t){arguments[0]=t=e.$handleEvent(t),e.onInput.apply(void 0,arguments)},show_bnsKeyboard:function(t){arguments[0]=t=e.$handleEvent(t),e.show_bnsKeyboard.apply(void 0,arguments)},getEncryptParam:function(t){arguments[0]=t=e.$handleEvent(t),e.getEncryptParam.apply(void 0,arguments)}}})],1):e._e(),e.KBSWITCH?e._e():a("v-uni-view",{staticClass:"kb-box",staticStyle:{position:"absolute",bottom:"0",left:"0"}},e._l(e.keyArray,(function(t,n){return a("v-uni-view",{key:n,staticClass:"js"},e._l(t,(function(t){return a("v-uni-view",{key:t,staticClass:"j",class:t,attrs:{"hover-class":"view-hover"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.handleTapKey(t)}}},[a("v-uni-view",["c b"===t?a("v-uni-image",{staticClass:"backspace",attrs:{src:e.PICTURE_URL+"backspace.png"}}):e._e()],1)],1)})),1)})),1)],1)},i=[]}}]);