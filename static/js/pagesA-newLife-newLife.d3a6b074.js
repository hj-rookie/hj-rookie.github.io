(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-newLife-newLife"],{"02b1":function(t,e,a){"use strict";a.r(e);var i=a("5148"),r=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a},"3bdc":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".container[data-v-29b0b0bf]{border:0}.camera-wrap[data-v-29b0b0bf]{width:100%;height:100vh;overflow:hidden;position:relative;background-color:#fff}.camera-box[data-v-29b0b0bf]{top:%?220?%;left:50%;width:%?480?%;\n    /* height: 740upx; */height:%?480?%;position:absolute;margin-left:%?-240?%;border-radius:%?240?%}.circleProgress_wrapper[data-v-29b0b0bf]{top:%?220?%;left:50%;width:%?520?%;height:%?520?%;position:absolute;margin-left:%?-260?%;border:1px solid #ddd}.bordView[data-v-29b0b0bf]{\n    /* top: 120upx;\n\t\tleft: 50%; */width:%?520?%;height:%?520?%;position:relative;\n    /* margin-left: -260upx; */border:%?10?% solid #4cd964;border-radius:50%;-webkit-transform:rotate(45deg)}.circleProgress[data-v-29b0b0bf]{width:50%;height:50%;border:%?20?% solid transparent;border-radius:50%;position:absolute;top:0}.rightcircle[data-v-29b0b0bf]{border-top:%?20?% solid green;border-right:%?20?% solid green;right:0}.wrapper[data-v-29b0b0bf]{width:50%;height:100%;position:absolute;top:0;overflow:hidden}.right[data-v-29b0b0bf]{right:0}.left[data-v-29b0b0bf]{left:0}.camera-box.small[data-v-29b0b0bf]{width:%?480?%;\n    /* height: 640upx; */height:%?480?%;margin-left:%?-240?%\n    /* border-radius: 50%; */}.camera-controls[data-v-29b0b0bf],\n  .camera-box uni-camera[data-v-29b0b0bf],\n  .camera-box uni-cover-image[data-v-29b0b0bf]{width:100%;height:100%}.helper[data-v-29b0b0bf],\n  .label-view[data-v-29b0b0bf]{top:0;color:#fff;width:100%;font-size:%?34?%;text-align:center;position:absolute}.camera-controls .cancel-btn[data-v-29b0b0bf]{top:0;left:0;width:%?160?%;text-align:center;position:absolute}.label-view[data-v-29b0b0bf]{top:%?70?%}.camera-controls .take-btn[data-v-29b0b0bf]{left:50%;bottom:%?130?%;width:%?146?%;height:%?146?%;position:absolute;border-radius:100%;margin-left:%?-73?%;transition:all .2s ease;\n    /* background-color: rgba(255, 255, 255, .6); */background-color:rgba(253,234,235,.6)}.take-btn.take-btn-hover[data-v-29b0b0bf]{\n    /* transform: scale(.98); */\n    /* background-color: rgba(222, 183, 114, .6); */background-color:rgba(253,234,235,.6)}.camera-controls .take-btn .inner[data-v-29b0b0bf]{width:%?122?%;height:%?122?%;position:relative;border-radius:100%;\n    /* background-color: #fff; */\n    /* background-color: orange; */background-image:linear-gradient(-270deg,#fb6e4d,#e73339)}@-webkit-keyframes wave-data-v-29b0b0bf{from{opacity:.5;-webkit-transform:scale(0);transform:scale(0)}90%{opacity:0;-webkit-transform:scale(2);transform:scale(2)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes wave-data-v-29b0b0bf{from{opacity:.5;-webkit-transform:scale(0);transform:scale(0)}90%{opacity:0;-webkit-transform:scale(2);transform:scale(2)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}.wave-view[data-v-29b0b0bf]{top:0;left:0;right:0;bottom:0;display:none;position:absolute;border-radius:100%;background-color:#fff;-webkit-animation:wave-data-v-29b0b0bf 1s infinite;animation:wave-data-v-29b0b0bf 1s infinite}.wave-view.delay[data-v-29b0b0bf]{-webkit-animation-delay:.2s;animation-delay:.2s}.btn-recording .wave-view[data-v-29b0b0bf]{display:block}.recording[data-v-29b0b0bf]{opacity:0;width:100%;color:#fff;bottom:%?60?%;font-size:%?34?%;text-align:center;position:absolute;transition:opacity 1s ease}.recording.show[data-v-29b0b0bf]{opacity:1}.btn-recording[data-v-29b0b0bf]{-webkit-transform:scale(1.3);transform:scale(1.3)}.label-view[data-v-29b0b0bf]{color:#fff;font-size:%?48?%;margin-left:%?10?%;letter-spacing:%?20?%}.label-view uni-text[data-v-29b0b0bf]{display:inline-block;transition:color .3s ease}.label-view uni-text.focus[data-v-29b0b0bf]{color:#3d90f1}.loop-pie[data-v-29b0b0bf]{\n    /* position:relative;\n\t\twidth:200px;\n\t\theight:200px;\n\t\tmargin:60px; */width:%?560?%;height:%?560?%;top:%?180?%;left:50%;\n    /* //calc(50% - 20upx) */\n    /* width: 560upx;\n\n\t\theight: 560upx; */position:absolute;margin-left:%?-280?%}.loop-pie-line[data-v-29b0b0bf]{position:absolute;width:50%;height:100%;top:0;overflow:hidden}.loop-pie[data-v-29b0b0bf] :last-child{margin-left:%?2?%}.loop-pie[data-v-29b0b0bf] :first-child{margin-right:%?2?%}.loop-pie-l[data-v-29b0b0bf]{top:0;left:0}.loop-pie-r[data-v-29b0b0bf]{top:0;-webkit-transform:rotate(180deg);right:0}.loop-pie-c[data-v-29b0b0bf]{width:200%;height:100%;border:%?20?% solid transparent;border-radius:50%;position:absolute;box-sizing:border-box;top:0;-webkit-transform:rotate(-45deg)}.loop-right[data-v-29b0b0bf]{-webkit-animation:circleProgressLoad_right-data-v-29b0b0bf 4s linear;-webkit-animation-fill-mode:forwards}.loop-left[data-v-29b0b0bf]{-webkit-animation:circleProgressLoad_left-data-v-29b0b0bf 4s linear;-webkit-animation-fill-mode:forwards}@-webkit-keyframes circleProgressLoad_right-data-v-29b0b0bf{0%{-webkit-transform:rotate(-45deg)}50%,\n    100%{-webkit-transform:rotate(135deg)}}@-webkit-keyframes circleProgressLoad_left-data-v-29b0b0bf{0%,\n    50%{-webkit-transform:rotate(-45deg)}100%{-webkit-transform:rotate(135deg)}}.loop-pie-rm[data-v-29b0b0bf]{border-top:%?20?% solid transparent;border-left:%?20?% solid transparent;border-bottom:%?20?% solid #e73339;border-right:%?20?% solid #e73339}.loop-pie-lm[data-v-29b0b0bf]{border-top:%?20?% solid transparent;border-left:%?20?% solid transparent;border-bottom:%?20?% solid #e73339;border-right:%?20?% solid #e73339}",""]),t.exports=e},5148:function(t,e,a){"use strict";var i=a("4ea4");a("ac1f"),a("841c"),a("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var r,o=i(a("1da1")),n=i(a("5530")),s=a("26cb"),l=a("8e55"),d=i(a("0a34")),c=i(a("e3e9")),b=(0,s.createNamespacedHelpers)("factor"),f=b.mapState,u=b.mapMutations,v=0,h={data:function(){return{isRecording:!1,isForloding:!1,rdShow:!1,isCameraError:!1,helperText:"按住拍摄",labelDuration:0,isHuaWei:!0,windowWidth:0,load:!1,PICTURE_URL:l.PICTURE_URL}},computed:(0,n.default)((0,n.default)({},f(["lifeData"])),{},{labels:function(){var t=this.lifeData;return t.label?t.label.split(""):[]}}),onLoad:function(){var t=this;this.windowWidth=wx.getSystemInfoSync().windowWidth,this.timerLoad=setTimeout((function(){t.load=!0,clearTimeout(t.timerLoad),t.timerLoad=null}),200)},onShow:function(){var t=this;uni.getSystemInfo({success:function(e){var a=e.brand;t.isHuaWei=-1!==a.search("HUAWEI")}})},methods:(0,n.default)((0,n.default)({},u(["updateLifeData"])),{},{draw:function(){this.timer=null;var t=0,e=this;function a(){e.timer=c.default.doAnimationFrame((function(){if(t>=250)return c.default.abortAnimationFrame(e.timer),e.timer=null,void e.doStopRecord();t+=1,e.drawArc(t),a(),v+=.016,e.rdShow=!e.rdShow}))}a()},drawArc:function(t){var e=uni.createCanvasContext("canvas");e.setLineWidth(20/750*this.windowWidth),e.setStrokeStyle("#E73339"),e.setLineCap("round"),e.beginPath(),e.arc(280/750*this.windowWidth,280/750*this.windowWidth,260/750*this.windowWidth,-90*Math.PI/180,(100*t/250*3.6-90)*Math.PI/180,!1),e.stroke(),e.draw()},onCancel:function(){d.default.navigateBack()},onTouchEnd:function(){if(!this.isTaking)return clearTimeout(this.tapTakeTimer),this.tapTakeTimer=null,this.isRecording=!1,this.helperText="请按住按钮进行拍摄",void this.stopLabelTimer();this.doStopRecord()},onTapTakeBtn:function(){var t=this;this.isRecording=!0,this.helperText="松手停止",this.tapTakeTimer=setTimeout((function(){t.doStartRecord()}),100)},doStartRecord:function(){this.isTaking||(this.isTaking=!0,this.startRecord())},doStopRecord:function(){if(this.isTaking=!1,c.default.abortAnimationFrame(this.timer),this.drawArc(0),v<4)this.isRecording=!1,this.helperText="时长太短，请重新拍摄",this.clearTimer();else if(v>6)this.isRecording=!1,this.helperText="时长太长，请重新拍摄",this.clearTimer();else{if(!0===this.isForloding)return;this.isForloding=!0,this.tapTakeTimer=null,this.isRecording=!1,this.helperText="请按住按钮进行拍摄",v=0,this.stopRecord()}},startLabelTimer:function(){var t=this;r=setInterval((function(){t.labelDuration++}),500)},stopLabelTimer:function(){this.isRecording=!1,clearInterval(r),r=null,this.labelDuration=0},onCameraError:function(){this.isCameraError=!0},onCameraDone:function(){this.isCameraError=!1},onOpenSetting:function(){var t=this;uni.openSetting({success:function(e){t.isCameraError=!1}})},stopRecord:function(){return(0,o.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},startRecord:function(){},startTimer:function(){var t=this;this.clearTimer(),this.recordTimer=setInterval((function(){v++,t.rdShow=!t.rdShow}),1e3)},clearTimer:function(){v=0,this.recordTimer&&(clearInterval(this.recordTimer),this.recordTimer=null)}})};e.default=h},"78a0":function(t,e,a){"use strict";var i=a("e053"),r=a.n(i);r.a},a7b8:function(t,e,a){"use strict";a.r(e);var i=a("fc16"),r=a("02b1");for(var o in r)"default"!==o&&function(t){a.d(e,t,(function(){return r[t]}))}(o);a("78a0");var n,s=a("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"29b0b0bf",null,!1,i["a"],n);e["default"]=l.exports},e053:function(t,e,a){var i=a("3bdc");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("4f06").default;r("9dc4d6ea",i,!0,{sourceMap:!1,shadowMode:!1})},e3e9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=0,r=function(t){var e=(new Date).getTime(),a=Math.max(0,16-(e-i)),r=setTimeout((function(){t(e+a)}),a);return i=e+a,r},o=function(t){clearTimeout(t)},n={doAnimationFrame:r,abortAnimationFrame:o};e.default=n},fc16:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[t.isCameraError?a("v-uni-view",{staticClass:"fail-box"},[a("v-uni-view",{staticClass:"fail-title"},[a("v-uni-text",{staticClass:"fs-32"},[t._v("调用摄像头失败")])],1),a("v-uni-view",{staticClass:"fail-content"},[a("v-uni-text",{staticClass:"desc fs-28 color-gray",staticStyle:{"font-weight":"bold"}},[t._v("请授权我们使用摄像头和录音的权限，否则将无法完成此功能。")]),a("v-uni-button",{staticClass:"fs-32",staticStyle:{color:"#4091F1","margin-top":"30upx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onOpenSetting.apply(void 0,arguments)}}},[t._v("重新授权")])],1)],1):t._e(),a("v-uni-view",{staticClass:"camera-wrap",attrs:{"wx:else":!0}},[a("v-uni-canvas",{staticClass:"loop-pie",staticStyle:{"z-index":"10000",position:"absolute"},attrs:{"canvas-id":"canvas"}}),a("v-uni-view",{staticClass:"camera-box",class:t.isHuaWei?"small":"",staticStyle:{"z-index":"902"}},[a("v-uni-cover-view",{staticStyle:{position:"absolute","z-index":"901"}},[a("v-uni-cover-image",{attrs:{src:t.PICTURE_URL+"td_y@2x-2.png"}})],1)],1),a("v-uni-view",{staticClass:"camera-controls"},[a("v-uni-text",{staticClass:"helper",staticStyle:{color:"#333333",top:"80upx","font-weight":"bold"}},[t._v("将脸移入框内，按住拍摄键录制视频")]),a("v-uni-view",{staticClass:"take-btn flex-box align-center justify-center",class:t.isRecording?"btn-recording":"",attrs:{"hover-class":"take-btn-hover"},on:{touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchEnd.apply(void 0,arguments)},touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onTapTakeBtn.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"inner flex-box align-center justify-center"},[a("v-uni-view",{staticClass:"wave-view"}),a("v-uni-view",{staticClass:"wave-view delay"}),a("v-uni-text",{staticClass:"color-primary fs-32",staticStyle:{color:"#fff"}},[t._v(t._s(t.isRecording?"停止":"拍摄"))])],1)],1),a("v-uni-view",{staticClass:"take-btn flex-box align-center justify-center",attrs:{hidden:"true","hover-class":"take-btn-hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onToggleRecord.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"inner flex-box align-center justify-center"},[a("v-uni-text",{staticClass:"color-primary fs-32"},[t._v(t._s(t.isRecording?"停止":"拍摄"))])],1)],1),a("v-uni-view",{staticClass:"recording show",staticStyle:{color:"#333333"}},[t._v(t._s(t.helperText))])],1)],1)],1)},o=[]}}]);